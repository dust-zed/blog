<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='HTTP协议深度解析 深入地讲解HTTP协议的核心知识。\n一、HTTP基础架构 1.1 HTTP的本质 HTTP是一个无状态的应用层协议，基于请求-响应模型：\n客户端发起请求 服务器返回响应 每次请求都是独立的，服务器不保留之前的状态 1.2 传输层基础 HTTP建立在TCP之上：\nHTTP/1.0和1.1: 使用TCP HTTP/2: 使用TCP（但优化了多路复用） HTTP/3:使用QUIC（基于UDP） 二、 HTTP请求结构 2.1 请求组成 请求行 (Request Line) 请求头 (Headers) 空行 请求体 (Body, 可选) 示例：\nGET /api/users?page=1 HTTP/1.1 Host: example.com User-Agent: Mozilla/5.0 Accept: application/json Content-Type: application/json Cookie: session_id=abc123 {"filter": "active"} 2.2 请求方法深入 GET\n获取资源，幂等且安全 参数在URL中，有长度限制 可被缓存、书签保存 POST\n创建资源或提交数据 参数在请求体中，无长度限制 不可缓存（除非显式指定） PUT\n完整更新资源，幂等 多次执行结果相同 PATCH\n部分更新资源 只更新指定字段 DELETE\n删除资源，幂等 HEAD\n只获取响应头，不返回响应体 用于检查资源是否存在、获取元信息 OPTIONS\n查询服务器支持的方法 CORS预检请求使用 2.3 关键请求头 Host：必需，指定目标主机\nHost: www.example.com:8080 User-Agent：客户端信息\n'><title>Http协议深度解析</title><link rel=canonical href=https://www.dust-zed.site/basic/internet/http%E5%8D%8F%E8%AE%AE%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Http协议深度解析"><meta property='og:description' content='HTTP协议深度解析 深入地讲解HTTP协议的核心知识。\n一、HTTP基础架构 1.1 HTTP的本质 HTTP是一个无状态的应用层协议，基于请求-响应模型：\n客户端发起请求 服务器返回响应 每次请求都是独立的，服务器不保留之前的状态 1.2 传输层基础 HTTP建立在TCP之上：\nHTTP/1.0和1.1: 使用TCP HTTP/2: 使用TCP（但优化了多路复用） HTTP/3:使用QUIC（基于UDP） 二、 HTTP请求结构 2.1 请求组成 请求行 (Request Line) 请求头 (Headers) 空行 请求体 (Body, 可选) 示例：\nGET /api/users?page=1 HTTP/1.1 Host: example.com User-Agent: Mozilla/5.0 Accept: application/json Content-Type: application/json Cookie: session_id=abc123 {"filter": "active"} 2.2 请求方法深入 GET\n获取资源，幂等且安全 参数在URL中，有长度限制 可被缓存、书签保存 POST\n创建资源或提交数据 参数在请求体中，无长度限制 不可缓存（除非显式指定） PUT\n完整更新资源，幂等 多次执行结果相同 PATCH\n部分更新资源 只更新指定字段 DELETE\n删除资源，幂等 HEAD\n只获取响应头，不返回响应体 用于检查资源是否存在、获取元信息 OPTIONS\n查询服务器支持的方法 CORS预检请求使用 2.3 关键请求头 Host：必需，指定目标主机\nHost: www.example.com:8080 User-Agent：客户端信息\n'><meta property='og:url' content='https://www.dust-zed.site/basic/internet/http%E5%8D%8F%E8%AE%AE%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/'><meta property='og:site_name' content='zed的博客'><meta property='og:type' content='article'><meta property='article:section' content='Basic'><meta property='article:published_time' content='2025-11-02T10:14:30+08:00'><meta property='article:modified_time' content='2025-11-02T10:14:30+08:00'><meta name=twitter:title content="Http协议深度解析"><meta name=twitter:description content='HTTP协议深度解析 深入地讲解HTTP协议的核心知识。\n一、HTTP基础架构 1.1 HTTP的本质 HTTP是一个无状态的应用层协议，基于请求-响应模型：\n客户端发起请求 服务器返回响应 每次请求都是独立的，服务器不保留之前的状态 1.2 传输层基础 HTTP建立在TCP之上：\nHTTP/1.0和1.1: 使用TCP HTTP/2: 使用TCP（但优化了多路复用） HTTP/3:使用QUIC（基于UDP） 二、 HTTP请求结构 2.1 请求组成 请求行 (Request Line) 请求头 (Headers) 空行 请求体 (Body, 可选) 示例：\nGET /api/users?page=1 HTTP/1.1 Host: example.com User-Agent: Mozilla/5.0 Accept: application/json Content-Type: application/json Cookie: session_id=abc123 {"filter": "active"} 2.2 请求方法深入 GET\n获取资源，幂等且安全 参数在URL中，有长度限制 可被缓存、书签保存 POST\n创建资源或提交数据 参数在请求体中，无长度限制 不可缓存（除非显式指定） PUT\n完整更新资源，幂等 多次执行结果相同 PATCH\n部分更新资源 只更新指定字段 DELETE\n删除资源，幂等 HEAD\n只获取响应头，不返回响应体 用于检查资源是否存在、获取元信息 OPTIONS\n查询服务器支持的方法 CORS预检请求使用 2.3 关键请求头 Host：必需，指定目标主机\nHost: www.example.com:8080 User-Agent：客户端信息\n'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_f509edb42ecc0ebd.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>zed的博客</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><li><a href=/android-develop><span>android-develop</span></a></li><li><a href=/basic><span>basic</span></a></li><li><a href=/rust><span>rust</span></a></li><li><a href=/learning-reflection/><span>Learning-Reflections</span></a></li><li><a href=/tutorials/><span>Tutorials</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/basic/internet/http%E5%8D%8F%E8%AE%AE%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/>Http协议深度解析</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Nov 02, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 4 分钟</time></div></footer></div></header><section class=article-content><h3 id=http协议深度解析>HTTP协议深度解析</h3><p>深入地讲解HTTP协议的核心知识。</p><h4 id=一http基础架构>一、HTTP基础架构</h4><h5 id=11-http的本质>1.1 HTTP的本质</h5><p>HTTP是一个无状态的应用层协议，基于<strong>请求-响应</strong>模型：</p><ul><li>客户端发起请求</li><li>服务器返回响应</li><li>每次请求都是独立的，服务器不保留之前的状态</li></ul><h5 id=12-传输层基础>1.2 传输层基础</h5><p>HTTP建立在TCP之上：</p><ul><li>HTTP/1.0和1.1: 使用TCP</li><li>HTTP/2: 使用TCP（但优化了多路复用）</li><li>HTTP/3:使用QUIC（基于UDP）</li></ul><h4 id=二-http请求结构>二、 HTTP请求结构</h4><h5 id=21-请求组成>2.1 请求组成</h5><pre tabindex=0><code>请求行 (Request Line)
请求头 (Headers)
空行
请求体 (Body, 可选)
</code></pre><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#a6e22e>GET</span> /api/users?page=1 <span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span>
</span></span><span style=display:flex><span>Host<span style=color:#f92672>:</span> <span style=color:#ae81ff>example.com</span>
</span></span><span style=display:flex><span>User-Agent<span style=color:#f92672>:</span> <span style=color:#ae81ff>Mozilla/5.0</span>
</span></span><span style=display:flex><span>Accept<span style=color:#f92672>:</span> <span style=color:#ae81ff>application/json</span>
</span></span><span style=display:flex><span>Content-Type<span style=color:#f92672>:</span> <span style=color:#ae81ff>application/json</span>
</span></span><span style=display:flex><span>Cookie<span style=color:#f92672>:</span> <span style=color:#ae81ff>session_id=abc123</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;filter&#34;</span>: <span style=color:#e6db74>&#34;active&#34;</span>}
</span></span></code></pre></div><h5 id=22-请求方法深入>2.2 请求方法深入</h5><p><strong>GET</strong></p><ul><li>获取资源，幂等且安全</li><li>参数在URL中，有长度限制</li><li>可被缓存、书签保存</li></ul><p><strong>POST</strong></p><ul><li>创建资源或提交数据</li><li>参数在请求体中，无长度限制</li><li>不可缓存（除非显式指定）</li></ul><p><strong>PUT</strong></p><ul><li>完整更新资源，幂等</li><li>多次执行结果相同</li></ul><p><strong>PATCH</strong></p><ul><li>部分更新资源</li><li>只更新指定字段</li></ul><p><strong>DELETE</strong></p><ul><li>删除资源，幂等</li></ul><p><strong>HEAD</strong></p><ul><li>只获取响应头，不返回响应体</li><li>用于检查资源是否存在、获取元信息</li></ul><p><strong>OPTIONS</strong></p><ul><li>查询服务器支持的方法</li><li>CORS预检请求使用</li></ul><h5 id=23-关键请求头>2.3 关键请求头</h5><p><strong>Host</strong>：必需，指定目标主机</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Host: www.example.com:8080
</span></span></span></code></pre></div><p><strong>User-Agent</strong>：客户端信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
</span></span></span></code></pre></div><p><strong>Accept系列</strong>：内容协商</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Accept: text/html,application/json
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Accept-Encoding: gzip, deflate, br
</span></span></span></code></pre></div><p><strong>Authoriation</strong>：认证信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
</span></span></span></code></pre></div><p><strong>Cookie</strong>：会话标识</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cookie: session_id=abc123; user_pref=dark_mode
</span></span></span></code></pre></div><h4 id=三-http响应结构>三、 HTTP响应结构</h4><h5 id=31-响应组成>3.1 响应组成</h5><pre tabindex=0><code>状态行 (Status Line)
响应头 (Headers)
空行
响应体 (Body)
</code></pre><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span> <span style=color:#ae81ff>200</span> <span style=color:#a6e22e>OK</span>
</span></span><span style=display:flex><span>Content-Type<span style=color:#f92672>:</span> <span style=color:#ae81ff>application/json</span>
</span></span><span style=display:flex><span>Content-Length<span style=color:#f92672>:</span> <span style=color:#ae81ff>348</span>
</span></span><span style=display:flex><span>Cache-Control<span style=color:#f92672>:</span> <span style=color:#ae81ff>max-age=3600</span>
</span></span><span style=display:flex><span>Set-Cookie<span style=color:#f92672>:</span> <span style=color:#ae81ff>session_id=xyz789; HttpOnly; Secure</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{<span style=color:#f92672>&#34;status&#34;</span>: <span style=color:#e6db74>&#34;success&#34;</span>, <span style=color:#f92672>&#34;data&#34;</span>: {<span style=color:#960050;background-color:#1e0010>...</span>}}
</span></span></code></pre></div><h5 id=32-状态码深度解析>3.2 状态码深度解析</h5><p><strong>1xx</strong>信息性响应</p><ul><li><code>100 Continue</code>：客户端继续发送请求体</li><li><code>101 Switching Protocols</code>：切换协议（如WebSocket）</li></ul><p><strong>2xx</strong>成功</p><ul><li><code>200 OK</code>：请求成功</li><li><code>201 Created</code>：资源已创建</li><li><code>204 No Content</code>： 成功但无响应体</li><li><code>206 Partial Content</code>：范围请求成功</li></ul><p><strong>3xx</strong>重定向</p><ul><li><code>301 Moved Permanently</code>：永久重定向，会改变后续请求方法为GET</li><li><code>302 Found</code>：临时重定向</li><li><code>303 See Other</code>：使用GET方法重定向</li><li><code>304 Not Modified</code>：资源未修改，使用缓存</li><li><code>307 Temporary Redirect</code>：临时重定向，保持请求方法</li><li><code>308 Permanent Redirect</code>：永久重定向，保持请求方法</li></ul><p><strong>4xx</strong>客户端错误</p><ul><li><code>400 Bad Request</code>：请求语法错误</li><li><code>401 Unathorized</code>：需要认证</li><li><code>403 Fobidden</code>：拒绝访问</li><li><code>404 Not Found</code>：资源不存在</li><li><code>405 Method Not Allowed</code>：方法不允许</li><li><code>409 Conflict</code>：请求冲突</li><li><code>429 Too Many Requests</code>：请求过多</li></ul><p><strong>5xx</strong>服务器错误</p><ul><li><code>500 Internal Server Error</code>：服务器内部错误</li><li><code>502 Bad Gateway</code>：网关错误</li><li><code>503 Service Unavailable</code>：服务不可用</li><li><code>504 Gateway Timeout</code>：网关超时</li></ul><h5 id=33-关键响应头>3.3 关键响应头</h5><p><strong>Content-Type</strong>：响应体类型</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: application/json; charset=utf-8
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: text/html; charset=utf-8
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Type: multipart/form-data; boundary=----WebKitFormBoundary
</span></span></span></code></pre></div><p><strong>Set-Cookie</strong>：设置Cookie</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Set-Cookie: session_id=abc123; Path=/; HttpOnly; Secure; SameSite=Strict; Max-Age=3600
</span></span></span></code></pre></div><p><strong>Cache-Control</strong>：缓存策略</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cache-Control: no-cache, no-store, must-revalidate
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cache-Control: public, max-age=31536000
</span></span></span></code></pre></div><h4 id=四http连接管理>四、HTTP连接管理</h4><h5 id=41-持久连接keep-alive>4.1 持久连接(Keep-Alive)</h5><p>HTTP/1.0: 默认短连接</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Connection: Keep-Alive
</span></span></span></code></pre></div><p>HTTP/1.1: 默认持久连接</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Connection: close  # 明确关闭
</span></span></span></code></pre></div><p><strong>优势</strong>：</p><ul><li>减少 TCP 握手开销</li><li>降低延迟</li><li>减轻服务器负担</li></ul><h5 id=42-管道化pipelining>4.2 管道化（Pipelining）</h5><ul><li>HTTP/1.1 支持但很少用</li><li>可以连续发送多个请求，无需等待响应</li><li>存在队头阻塞问题</li></ul><h5 id=43-http2-多路复用>4.3 HTTP/2 多路复用</h5><pre tabindex=0><code>单个 TCP 连接
  ├─ Stream 1: /index.html
  ├─ Stream 2: /style.css
  ├─ Stream 3: /script.js
  └─ Stream 4: /api/data
</code></pre><p><strong>特性:</strong></p><ul><li>二进制分帧</li><li>请求/响应并行</li><li>服务器推送</li><li>头部压缩(HPACK)</li></ul><h4 id=五缓存机制深入>五、缓存机制深入</h4><h5 id=51-强缓存>5.1 强缓存</h5><p><strong>Expires</strong>(HTTP/1.0)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Expires: Wed, 21 Oct 2025 07:28:00 GMT
</span></span></span></code></pre></div><p><strong>Cache-Control</strong>(HTTP/1.1,优先级更高)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cache-Control: max-age=3600
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cache-Control: public, max-age=31536000, immutable
</span></span></span></code></pre></div><p>指令详解：</p><ul><li><code>public</code>: 可被任何缓存存储</li><li><code>private</code>：只能被浏览器缓存</li><li><code>no-cache</code>：必须验证后才能使用</li><li><code>no-store</code>：不得缓存</li><li><code>max-age=N</code>：缓存N秒</li><li><code>s-maxage=N</code>: 代理服务器缓存N秒</li><li><code>immutable</code>：资源永不改变</li></ul><h5 id=52-协商缓存>5.2 协商缓存</h5><p><strong>Last-Modified/ If-Modified-Since</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 首次响应
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Last-Modified: Wed, 21 Oct 2024 07:28:00 GMT
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 再次请求
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>If-Modified-Since: Wed, 21 Oct 2024 07:28:00 GMT
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 未修改返回
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span> <span style=color:#ae81ff>304</span> <span style=color:#a6e22e>Not Modified</span>
</span></span></code></pre></div><p><strong>ETag/ If-None-Match</strong>(更精确)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 首次响应
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>ETag: &#34;33a64df551425fcc55e4d42a148795d9f25f89d4&#34;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 再次请求
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>If-None-Match: &#34;33a64df551425fcc55e4d42a148795d9f25f89d4&#34;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 未修改返回
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span> <span style=color:#ae81ff>304</span> <span style=color:#a6e22e>Not Modified</span>
</span></span></code></pre></div><h5 id=53-缓存策略>5.3 缓存策略</h5><p>强缓存优先策略：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cache-Control: public, max-age=31536000, immutable
</span></span></span></code></pre></div><p>协商缓存策略：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cache-Control: no-cache
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>ETag: &#34;version-123&#34;
</span></span></span></code></pre></div><p>不缓存策略：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Cache-Control: no-store, no-cache, must-revalidate
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Pragma: no-cache
</span></span></span></code></pre></div><h4 id=六安全相关>六、安全相关</h4><h5 id=61-https原理>6.1 HTTPS原理</h5><p><strong>TLS/SSL</strong>握手过程：</p><ol><li>客户端发送支持的加密套件</li><li>服务器选择加密套件，发送证书</li><li>客户端验证证书，生成预主密钥</li><li>双方协商会话密钥</li><li>使用对称加密通信</li></ol><p><strong>对称加密 + 非对称加密混合：</strong></p><ul><li>非对称加密交换密钥（慢但安全）</li><li>对称加密传输数据（快）</li></ul><h5 id=62-cookie安全>6.2 Cookie安全</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Set-Cookie: session=abc; 
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  HttpOnly;        # 防止 XSS 攻击
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  Secure;          # 只通过 HTTPS 传输
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  SameSite=Strict; # 防止 CSRF 攻击
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  Domain=.example.com;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  Path=/;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>  Max-Age=3600
</span></span></span></code></pre></div><p><strong>SameSite</strong>属性:</p><ul><li>Strict: 完全禁止跨站发送</li><li>Lax：GET请求可跨站发送</li><li>None：允许跨站（需配合Secure）</li></ul><h5 id=63-安全响应头>6.3 安全响应头</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 防止点击劫持
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>X-Frame-Options: DENY
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 内容类型嗅探保护
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>X-Content-Type-Options: nosniff
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># XSS 保护
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>X-XSS-Protection: 1; mode=block
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 内容安全策略
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Security-Policy: default-src &#39;self&#39;; script-src &#39;self&#39; &#39;unsafe-inline&#39;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># HTTPS 强制
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Strict-Transport-Security: max-age=31536000; includeSubDomains
</span></span></span></code></pre></div><h4 id=七性能优化>七、性能优化</h4><h5 id=71-内容编码>7.1 内容编码</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 请求支持的编码
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Accept-Encoding: gzip, deflate, br
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 响应使用的编码
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Content-Encoding: gzip
</span></span></span></code></pre></div><p>压缩率对比：</p><ul><li>gzip: 70-90%</li><li>Brotli(br): 75-95%(更优)</li></ul><h5 id=72-范围请求断点续传>7.2 范围请求（断点续传）</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 请求部分内容
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Range: bytes=0-1023
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 响应
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span> <span style=color:#ae81ff>206</span> <span style=color:#a6e22e>Partial Content</span>
</span></span><span style=display:flex><span>Content-Range<span style=color:#f92672>:</span> <span style=color:#ae81ff>bytes 0-1023/10240</span>
</span></span><span style=display:flex><span>Content-Length<span style=color:#f92672>:</span> <span style=color:#ae81ff>1024</span>
</span></span></code></pre></div><h5 id=73-条件请求>7.3 条件请求</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 只在资源未修改时更新
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>If-Unmodified-Since: Wed, 21 Oct 2024 07:28:00 GMT
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>If-Match: &#34;etag-value&#34;
</span></span></span></code></pre></div><h4 id=八cors跨域>八、CORS跨域</h4><h5 id=81-简单请求>8.1 简单请求</h5><p>满足条件：</p><ul><li>方法：GET，HEAD，POST</li><li>头部：Accept, Accept-Language, Content-Language, Content-Type</li><li>Content-Type: text/plain, multipart/form-data, application/x-www-form-urlencoded</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 请求
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Origin: https://example.com
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 响应
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Access-Control-Allow-Origin: https://example.com
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Access-Control-Allow-Credentials: true
</span></span></span></code></pre></div><h5 id=82-预检请求>8.2 预检请求</h5><p>复杂请求需要先发送OPTIONS：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-http data-lang=http><span style=display:flex><span><span style=color:#960050;background-color:#1e0010># 预检请求
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>OPTIONS</span> /api/data <span style=color:#66d9ef>HTTP</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.1</span>
</span></span><span style=display:flex><span>Origin<span style=color:#f92672>:</span> <span style=color:#ae81ff>https://example.com</span>
</span></span><span style=display:flex><span>Access-Control-Request-Method<span style=color:#f92672>:</span> <span style=color:#ae81ff>PUT</span>
</span></span><span style=display:flex><span>Access-Control-Request-Headers<span style=color:#f92672>:</span> <span style=color:#ae81ff>Content-Type, X-Custom-Header</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># 预检响应
</span></span><span style=display:flex><span>HTTP/1.1 204 No Content
</span></span><span style=display:flex><span>Access-Control-Allow-Origin: https://example.com
</span></span><span style=display:flex><span>Access-Control-Allow-Methods: GET, POST, PUT, DELETE
</span></span><span style=display:flex><span>Access-Control-Allow-Headers: Content-Type, X-Custom-Header
</span></span><span style=display:flex><span>Access-Control-Max-Age: 86400
</span></span></code></pre></div><h4 id=九http3-与quic>九、HTTP/3 与QUIC</h4><h5 id=91-核心改进>9.1 核心改进</h5><ul><li><strong>基于UDP</strong>：避免TCP队头阻塞</li><li><strong>0-RTT</strong>：首次连接后，后续连接无需握手</li><li><strong>连接迁移</strong>：IP变化不影响连接</li><li><strong>内置加密</strong>：强制 TLS 1.3</li></ul><h5 id=92-性能对比>9.2 性能对比</h5><pre tabindex=0><code>HTTP/1.1: 多个 TCP 连接,队头阻塞
HTTP/2:   单个 TCP 连接,TCP 层队头阻塞
HTTP/3:   QUIC,无队头阻塞,连接迁移
</code></pre><h4 id=十实践建议>十、实践建议</h4><h5 id=101-api-设计>10.1 API 设计</h5><ul><li>使用合适的 HTTP 方法</li><li>返回正确的状态码</li><li>设计清晰的 URL 结构</li><li>实现幂等性</li></ul><h5 id=102-性能优化>10.2 性能优化</h5><ul><li>启用 HTTP/2 或 HTTP/3</li><li>使用 CDN 和缓存策略</li><li>压缩响应内容</li><li>减少请求数量</li></ul><h5 id=103-安全措施>10.3 安全措施</h5><ul><li>使用 HTTPS</li><li>设置安全响应头</li><li>实现速率限制</li><li>验证输入数据</li></ul><hr><h4 id=层次协作>层次协作</h4><pre tabindex=0><code>应用层: HTTP 定义内容和格式
         ↓
       &#34;GET /index.html HTTP/1.1\r\nHost: example.com\r\n\r\n&#34;
         ↓
传输层: TCP 负责可靠传输
         ↓
       [分段] → [加序列号] → [确认机制] → [重传机制]
         ↓
网络层: IP 负责寻址和路由
         ↓
       [添加 IP 地址] → [选择路径]
         ↓
链路层: 以太网/WiFi 负责实际传输
         ↓
       [转换成电信号/无线信号]
</code></pre><p><strong>TCP</strong> 是传输管道(负责怎么送),<strong>HTTP</strong> 是管道里的内容规范(规定送什么和什么格式)</p><h4 id=osi七层模型-vs-tcpip四层模型>OSI七层模型 vs TCP/IP四层模型</h4><pre tabindex=0><code>OSI 七层模型          TCP/IP 四层模型        实际协议示例
┌─────────────┐      ┌─────────────┐
│ 7. 应用层    │      │             │      HTTP, FTP, SMTP, DNS
├─────────────┤      │             │      
│ 6. 表示层    │      │  应用层      │      SSL/TLS, JPEG, MPEG
├─────────────┤      │             │      
│ 5. 会话层    │      │             │      NetBIOS, RPC
├─────────────┤      ├─────────────┤
│ 4. 传输层    │      │  传输层      │      TCP, UDP
├─────────────┤      ├─────────────┤
│ 3. 网络层    │      │  网络层      │      IP, ICMP, ARP
├─────────────┤      ├─────────────┤
│ 2. 数据链路层│      │             │      Ethernet, WiFi, PPP
├─────────────┤      │  链路层      │      
│ 1. 物理层    │      │             │      网线, 光纤, 无线电波
└─────────────┘      └─────────────┘
</code></pre><p><strong>说明</strong>：OSI 是理论模型，TCP/IP 是实际应用的模型</p></section><footer class=article-footer></footer></article><footer class=site-footer><section class=copyright>&copy;
2025 zed的博客</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>