<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Material Design3(Material You) 核心概念 Material Design3 (MD3)是Google在Android 12+引入的设计系统，核心特性：\nDynamic Color：根据壁纸自动生成主题色 更圆润的组件： 更大的圆角半径 色彩角色系统：40+个语义化颜色槽位 个性化：让每个用户的应用看起来独一无二 版本要求 // Material 3 implementation(&#34;com.google.android.material:material:1.12.0&#34;) // Compose Material 3 implementation(&#34;androidx.compose.material3:material3:1.3.1&#34;) 主题系统架构 三层结构 Material Theme (Material 3) ↓ Application Theme (你的应用主题) ↓ Component Styles (组件样式) 色彩角色系统 Material 3 定义了5大色彩组：\n1. Primary（主色） &lt;!-- 最重要的品牌色，用于主要操作 --&gt; &lt;attr name=&#34;colorPrimary&#34; /&gt; &lt;!-- 主色 --&gt; &lt;attr name=&#34;colorOnPrimary&#34; /&gt; &lt;!-- 主色上的文字/图标 --&gt; &lt;attr name=&#34;colorPrimaryContainer&#34; /&gt; &lt;!-- 主色容器 --&gt; &lt;attr name=&#34;colorOnPrimaryContainer&#34; /&gt; &lt;!-- 容器上的内容 --&gt; 2. Secondary(次要色) &lt;!-- 次要操作，辅助主色 --&gt; &lt;attr name=&#34;colorSecondary&#34; /&gt; &lt;attr name=&#34;colorOnSecondary&#34; /&gt; &lt;attr name=&#34;colorSecondaryContainer&#34; /&gt; &lt;attr name=&#34;colorOnSecondaryContainer&#34; /&gt; 3. Tertiary(第三色) &lt;!-- 用于强调或对比 --&gt; &lt;attr name=&#34;colorTertiary&#34; /&gt; &lt;attr name=&#34;colorOnTertiary&#34; /&gt; &lt;attr name=&#34;colorTertiaryContainer&#34; /&gt; &lt;attr name=&#34;colorOnTertiaryContainer&#34; /&gt; 4. Error（错误色） &lt;!-- 错误状态 --&gt; &lt;attr name=&#34;colorError&#34; /&gt; &lt;attr name=&#34;colorOnError&#34; /&gt; &lt;attr name=&#34;colorErrorContainer&#34; /&gt; &lt;attr name=&#34;colorOnErrorContainer&#34; /&gt; 5. Surface &amp; Background(表面和背景) &lt;!-- 背景和表面 --&gt; &lt;attr name=&#34;colorSurface&#34; /&gt; &lt;!-- 卡片、对话框背景 --&gt; &lt;attr name=&#34;colorOnSurface&#34; /&gt; &lt;!-- 表面上的文字 --&gt; &lt;attr name=&#34;colorSurfaceVariant&#34; /&gt; &lt;!-- 表面变体 --&gt; &lt;attr name=&#34;colorOnSurfaceVariant&#34; /&gt; &lt;!-- 次要文字 --&gt; &lt;attr name=&#34;colorBackground&#34; /&gt; &lt;!-- 应用背景 --&gt; &lt;attr name=&#34;colorOnBackground&#34; /&gt; &lt;!-- 背景上的内容 --&gt; 6. Outline &amp; Other &lt;!-- 边框和其他 --&gt; &lt;attr name=&#34;colorOutline&#34; /&gt; &lt;!-- 分割线、边框 --&gt; &lt;attr name=&#34;colorOutlineVariant&#34; /&gt; &lt;!-- 更弱的边框 --&gt; &lt;attr name=&#34;colorSurfaceTint&#34; /&gt; &lt;!-- 表面着色（高度感） --&gt; Dynamic Color (动态配色) 所谓Dynamic Color：Android 12+系统会从用户壁纸提取颜色，生成整套主题色，实现”千人千面“。\n">
<title>Android主题系统指南</title>

<link rel='canonical' href='http://localhost:1313/android-develop/android%E4%B8%BB%E9%A2%98%E7%B3%BB%E7%BB%9F%E6%8C%87%E5%8D%97/'>

<link rel="stylesheet" href="/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css"><meta property='og:title' content="Android主题系统指南">
<meta property='og:description' content="Material Design3(Material You) 核心概念 Material Design3 (MD3)是Google在Android 12+引入的设计系统，核心特性：\nDynamic Color：根据壁纸自动生成主题色 更圆润的组件： 更大的圆角半径 色彩角色系统：40+个语义化颜色槽位 个性化：让每个用户的应用看起来独一无二 版本要求 // Material 3 implementation(&#34;com.google.android.material:material:1.12.0&#34;) // Compose Material 3 implementation(&#34;androidx.compose.material3:material3:1.3.1&#34;) 主题系统架构 三层结构 Material Theme (Material 3) ↓ Application Theme (你的应用主题) ↓ Component Styles (组件样式) 色彩角色系统 Material 3 定义了5大色彩组：\n1. Primary（主色） &lt;!-- 最重要的品牌色，用于主要操作 --&gt; &lt;attr name=&#34;colorPrimary&#34; /&gt; &lt;!-- 主色 --&gt; &lt;attr name=&#34;colorOnPrimary&#34; /&gt; &lt;!-- 主色上的文字/图标 --&gt; &lt;attr name=&#34;colorPrimaryContainer&#34; /&gt; &lt;!-- 主色容器 --&gt; &lt;attr name=&#34;colorOnPrimaryContainer&#34; /&gt; &lt;!-- 容器上的内容 --&gt; 2. Secondary(次要色) &lt;!-- 次要操作，辅助主色 --&gt; &lt;attr name=&#34;colorSecondary&#34; /&gt; &lt;attr name=&#34;colorOnSecondary&#34; /&gt; &lt;attr name=&#34;colorSecondaryContainer&#34; /&gt; &lt;attr name=&#34;colorOnSecondaryContainer&#34; /&gt; 3. Tertiary(第三色) &lt;!-- 用于强调或对比 --&gt; &lt;attr name=&#34;colorTertiary&#34; /&gt; &lt;attr name=&#34;colorOnTertiary&#34; /&gt; &lt;attr name=&#34;colorTertiaryContainer&#34; /&gt; &lt;attr name=&#34;colorOnTertiaryContainer&#34; /&gt; 4. Error（错误色） &lt;!-- 错误状态 --&gt; &lt;attr name=&#34;colorError&#34; /&gt; &lt;attr name=&#34;colorOnError&#34; /&gt; &lt;attr name=&#34;colorErrorContainer&#34; /&gt; &lt;attr name=&#34;colorOnErrorContainer&#34; /&gt; 5. Surface &amp; Background(表面和背景) &lt;!-- 背景和表面 --&gt; &lt;attr name=&#34;colorSurface&#34; /&gt; &lt;!-- 卡片、对话框背景 --&gt; &lt;attr name=&#34;colorOnSurface&#34; /&gt; &lt;!-- 表面上的文字 --&gt; &lt;attr name=&#34;colorSurfaceVariant&#34; /&gt; &lt;!-- 表面变体 --&gt; &lt;attr name=&#34;colorOnSurfaceVariant&#34; /&gt; &lt;!-- 次要文字 --&gt; &lt;attr name=&#34;colorBackground&#34; /&gt; &lt;!-- 应用背景 --&gt; &lt;attr name=&#34;colorOnBackground&#34; /&gt; &lt;!-- 背景上的内容 --&gt; 6. Outline &amp; Other &lt;!-- 边框和其他 --&gt; &lt;attr name=&#34;colorOutline&#34; /&gt; &lt;!-- 分割线、边框 --&gt; &lt;attr name=&#34;colorOutlineVariant&#34; /&gt; &lt;!-- 更弱的边框 --&gt; &lt;attr name=&#34;colorSurfaceTint&#34; /&gt; &lt;!-- 表面着色（高度感） --&gt; Dynamic Color (动态配色) 所谓Dynamic Color：Android 12+系统会从用户壁纸提取颜色，生成整套主题色，实现”千人千面“。\n">
<meta property='og:url' content='http://localhost:1313/android-develop/android%E4%B8%BB%E9%A2%98%E7%B3%BB%E7%BB%9F%E6%8C%87%E5%8D%97/'>
<meta property='og:site_name' content='zed的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Android-Develop' /><meta property='article:published_time' content='2025-10-17T11:24:19&#43;08:00'/><meta property='article:modified_time' content='2025-10-17T11:24:19&#43;08:00'/>
<meta name="twitter:title" content="Android主题系统指南">
<meta name="twitter:description" content="Material Design3(Material You) 核心概念 Material Design3 (MD3)是Google在Android 12+引入的设计系统，核心特性：\nDynamic Color：根据壁纸自动生成主题色 更圆润的组件： 更大的圆角半径 色彩角色系统：40+个语义化颜色槽位 个性化：让每个用户的应用看起来独一无二 版本要求 // Material 3 implementation(&#34;com.google.android.material:material:1.12.0&#34;) // Compose Material 3 implementation(&#34;androidx.compose.material3:material3:1.3.1&#34;) 主题系统架构 三层结构 Material Theme (Material 3) ↓ Application Theme (你的应用主题) ↓ Component Styles (组件样式) 色彩角色系统 Material 3 定义了5大色彩组：\n1. Primary（主色） &lt;!-- 最重要的品牌色，用于主要操作 --&gt; &lt;attr name=&#34;colorPrimary&#34; /&gt; &lt;!-- 主色 --&gt; &lt;attr name=&#34;colorOnPrimary&#34; /&gt; &lt;!-- 主色上的文字/图标 --&gt; &lt;attr name=&#34;colorPrimaryContainer&#34; /&gt; &lt;!-- 主色容器 --&gt; &lt;attr name=&#34;colorOnPrimaryContainer&#34; /&gt; &lt;!-- 容器上的内容 --&gt; 2. Secondary(次要色) &lt;!-- 次要操作，辅助主色 --&gt; &lt;attr name=&#34;colorSecondary&#34; /&gt; &lt;attr name=&#34;colorOnSecondary&#34; /&gt; &lt;attr name=&#34;colorSecondaryContainer&#34; /&gt; &lt;attr name=&#34;colorOnSecondaryContainer&#34; /&gt; 3. Tertiary(第三色) &lt;!-- 用于强调或对比 --&gt; &lt;attr name=&#34;colorTertiary&#34; /&gt; &lt;attr name=&#34;colorOnTertiary&#34; /&gt; &lt;attr name=&#34;colorTertiaryContainer&#34; /&gt; &lt;attr name=&#34;colorOnTertiaryContainer&#34; /&gt; 4. Error（错误色） &lt;!-- 错误状态 --&gt; &lt;attr name=&#34;colorError&#34; /&gt; &lt;attr name=&#34;colorOnError&#34; /&gt; &lt;attr name=&#34;colorErrorContainer&#34; /&gt; &lt;attr name=&#34;colorOnErrorContainer&#34; /&gt; 5. Surface &amp; Background(表面和背景) &lt;!-- 背景和表面 --&gt; &lt;attr name=&#34;colorSurface&#34; /&gt; &lt;!-- 卡片、对话框背景 --&gt; &lt;attr name=&#34;colorOnSurface&#34; /&gt; &lt;!-- 表面上的文字 --&gt; &lt;attr name=&#34;colorSurfaceVariant&#34; /&gt; &lt;!-- 表面变体 --&gt; &lt;attr name=&#34;colorOnSurfaceVariant&#34; /&gt; &lt;!-- 次要文字 --&gt; &lt;attr name=&#34;colorBackground&#34; /&gt; &lt;!-- 应用背景 --&gt; &lt;attr name=&#34;colorOnBackground&#34; /&gt; &lt;!-- 背景上的内容 --&gt; 6. Outline &amp; Other &lt;!-- 边框和其他 --&gt; &lt;attr name=&#34;colorOutline&#34; /&gt; &lt;!-- 分割线、边框 --&gt; &lt;attr name=&#34;colorOutlineVariant&#34; /&gt; &lt;!-- 更弱的边框 --&gt; &lt;attr name=&#34;colorSurfaceTint&#34; /&gt; &lt;!-- 表面着色（高度感） --&gt; Dynamic Color (动态配色) 所谓Dynamic Color：Android 12+系统会从用户壁纸提取颜色，生成整套主题色，实现”千人千面“。\n">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_f509edb42ecc0ebd.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">zed的博客</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/android-develop' >
                
                
                
                <span>android-develop</span>
            </a>
        </li>
        
        
        <li >
            <a href='/rust' >
                
                
                
                <span>rust</span>
            </a>
        </li>
        
        
        <li >
            <a href='/learning-reflection/' >
                
                
                
                <span>Learning-Reflections</span>
            </a>
        </li>
        
        
        <li >
            <a href='/tutorials/' >
                
                
                
                <span>Tutorials</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    

            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/android-develop/" >
                Android-Develop
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/android-develop/android%E4%B8%BB%E9%A2%98%E7%B3%BB%E7%BB%9F%E6%8C%87%E5%8D%97/">Android主题系统指南</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 17, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 6 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h4 id="material-design3material-you">Material Design3(Material You)
</h4><h5 id="核心概念">核心概念
</h5><p>Material Design3 (MD3)是Google在Android 12+引入的设计系统，核心特性：</p>
<ul>
<li><strong>Dynamic Color</strong>：根据壁纸自动生成主题色</li>
<li>更圆润的组件： 更大的圆角半径</li>
<li>色彩角色系统：40+个语义化颜色槽位</li>
<li>个性化：让每个用户的应用看起来独一无二</li>
</ul>
<h5 id="版本要求">版本要求
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// Material 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>implementation(<span style="color:#e6db74">&#34;com.google.android.material:material:1.12.0&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Compose Material 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>implementation(<span style="color:#e6db74">&#34;androidx.compose.material3:material3:1.3.1&#34;</span>)
</span></span></code></pre></div><hr>
<h4 id="主题系统架构">主题系统架构
</h4><h5 id="三层结构">三层结构
</h5><pre tabindex="0"><code>Material Theme (Material 3)
    ↓
Application Theme (你的应用主题)
    ↓
Component Styles (组件样式)
</code></pre><h5 id="色彩角色系统">色彩角色系统
</h5><p>Material 3 定义了5大色彩组：</p>
<h6 id="1-primary主色">1. Primary（主色）
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 最重要的品牌色，用于主要操作 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorPrimary&#34;</span> <span style="color:#f92672">/&gt;</span>          <span style="color:#75715e">&lt;!-- 主色 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnPrimary&#34;</span> <span style="color:#f92672">/&gt;</span>        <span style="color:#75715e">&lt;!-- 主色上的文字/图标 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorPrimaryContainer&#34;</span> <span style="color:#f92672">/&gt;</span> <span style="color:#75715e">&lt;!-- 主色容器 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnPrimaryContainer&#34;</span> <span style="color:#f92672">/&gt;</span> <span style="color:#75715e">&lt;!-- 容器上的内容 --&gt;</span>
</span></span></code></pre></div><h6 id="2-secondary次要色">2. Secondary(次要色)
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 次要操作，辅助主色 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSecondary&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnSecondary&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSecondaryContainer&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnSecondaryContainer&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><h6 id="3-tertiary第三色">3. Tertiary(第三色)
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 用于强调或对比 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorTertiary&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnTertiary&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorTertiaryContainer&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnTertiaryContainer&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><h6 id="4-error错误色">4. Error（错误色）
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 错误状态 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorError&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnError&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorErrorContainer&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnErrorContainer&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><h6 id="5-surface--background表面和背景">5. Surface &amp; Background(表面和背景)
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 背景和表面 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSurface&#34;</span> <span style="color:#f92672">/&gt;</span>          <span style="color:#75715e">&lt;!-- 卡片、对话框背景 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnSurface&#34;</span> <span style="color:#f92672">/&gt;</span>        <span style="color:#75715e">&lt;!-- 表面上的文字 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSurfaceVariant&#34;</span> <span style="color:#f92672">/&gt;</span>   <span style="color:#75715e">&lt;!-- 表面变体 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnSurfaceVariant&#34;</span> <span style="color:#f92672">/&gt;</span> <span style="color:#75715e">&lt;!-- 次要文字 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorBackground&#34;</span> <span style="color:#f92672">/&gt;</span>       <span style="color:#75715e">&lt;!-- 应用背景 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnBackground&#34;</span> <span style="color:#f92672">/&gt;</span>     <span style="color:#75715e">&lt;!-- 背景上的内容 --&gt;</span>
</span></span></code></pre></div><h6 id="6-outline--other">6. Outline &amp; Other
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 边框和其他 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOutline&#34;</span> <span style="color:#f92672">/&gt;</span>          <span style="color:#75715e">&lt;!-- 分割线、边框 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOutlineVariant&#34;</span> <span style="color:#f92672">/&gt;</span>   <span style="color:#75715e">&lt;!-- 更弱的边框 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;attr</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSurfaceTint&#34;</span> <span style="color:#f92672">/&gt;</span>      <span style="color:#75715e">&lt;!-- 表面着色（高度感） --&gt;</span>
</span></span></code></pre></div><hr>
<h4 id="dynamic-color-动态配色">Dynamic Color (动态配色)
</h4><p>所谓<strong>Dynamic Color</strong>：Android 12+系统会从用户壁纸提取颜色，生成整套主题色，实现”千人千面“。</p>
<h5 id="实现方式">实现方式
</h5><h6 id="方式一使用系统提供的主题">方式一：使用系统提供的主题
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/values/themes.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Android 12+ 会自动应用 Dynamic Color --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;Theme.MyApp&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;Theme.Material3.DayNight&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- 可选：覆盖特定颜色 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorPrimary&#34;</span><span style="color:#f92672">&gt;</span>@color/custom_primary<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/style&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/resources&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/values-v31/themes.xml (Android 12+ 专用) --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 使用 DynamicColors 主题 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;Theme.MyApp&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;Theme.Material3.DayNight.NoActionBar&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- 系统自动应用壁纸颜色，无需定义 colorPrimary 等 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/style&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/resources&gt;</span>
</span></span></code></pre></div><h6 id="方式二代码启用更灵活">方式二：代码启用（更灵活）
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// Application 或 Activity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyApplication</span> : Application() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate()
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 全局启用 Dynamic Color
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">DynamicColors</span>.applyToActivitiesIfAvailable(<span style="color:#66d9ef">this</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 单个 Activity 启用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> : AppCompatActivity() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 只在此 Activity 启用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">DynamicColors</span>.applyIfAvailable(<span style="color:#66d9ef">this</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h6 id="方式三提供回退方案">方式三：提供回退方案
</h6><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// 支持用户选择是否启用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyApplication</span> : Application() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate()
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (supportsDynamicColor() <span style="color:#f92672">&amp;&amp;</span> userPrefersDynamicColor()) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">DynamicColors</span>.applyToActivitiesIfAvailable(<span style="color:#66d9ef">this</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">supportsDynamicColor</span>(): Boolean {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Build</span>.<span style="color:#a6e22e">VERSION</span>.SDK_INT <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">Build</span>.<span style="color:#a6e22e">VERSION_CODES</span>.S <span style="color:#75715e">// Android 12+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="自定义dynamic-color">自定义Dynamic Color
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 即使启用 Dynamic Color，也可覆盖特定颜色 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;Theme.MyApp&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;Theme.Material3.DayNight&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 强制使用品牌色作为 Primary --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorPrimary&#34;</span><span style="color:#f92672">&gt;</span>@color/brand_color<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 其他颜色让系统自动生成 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/style&gt;</span>
</span></span></code></pre></div><hr>
<h4 id="传统view主题">传统View主题
</h4><h5 id="完整主题配置">完整主题配置
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/values/colors.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Light Mode Colors --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_primary&#34;</span><span style="color:#f92672">&gt;</span>#6750A4<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_onPrimary&#34;</span><span style="color:#f92672">&gt;</span>#FFFFFF<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_primaryContainer&#34;</span><span style="color:#f92672">&gt;</span>#EADDFF<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_onPrimaryContainer&#34;</span><span style="color:#f92672">&gt;</span>#21005D<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_secondary&#34;</span><span style="color:#f92672">&gt;</span>#625B71<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_onSecondary&#34;</span><span style="color:#f92672">&gt;</span>#FFFFFF<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_secondaryContainer&#34;</span><span style="color:#f92672">&gt;</span>#E8DEF8<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_onSecondaryContainer&#34;</span><span style="color:#f92672">&gt;</span>#1D192B<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_surface&#34;</span><span style="color:#f92672">&gt;</span>#FFFBFE<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_onSurface&#34;</span><span style="color:#f92672">&gt;</span>#1C1B1F<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_background&#34;</span><span style="color:#f92672">&gt;</span>#FFFBFE<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Dark Mode Colors --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_dark_primary&#34;</span><span style="color:#f92672">&gt;</span>#D0BCFF<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_dark_onPrimary&#34;</span><span style="color:#f92672">&gt;</span>#381E72<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- ... 其他深色模式颜色 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/resources&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/values/themes.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;Theme.MyApp&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;Theme.Material3.DayNight.NoActionBar&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- Primary --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorPrimary&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_primary<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnPrimary&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_onPrimary<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorPrimaryContainer&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_primaryContainer<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnPrimaryContainer&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_onPrimaryContainer<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- Secondary --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSecondary&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_secondary<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnSecondary&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_onSecondary<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSecondaryContainer&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_secondaryContainer<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnSecondaryContainer&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_onSecondaryContainer<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- Surface &amp; Background --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorSurface&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_surface<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;colorOnSurface&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_onSurface<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:colorBackground&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_background<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- 状态栏和导航栏 --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:statusBarColor&#34;</span><span style="color:#f92672">&gt;</span>@android:color/transparent<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:navigationBarColor&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_light_surface<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:windowLightStatusBar&#34;</span><span style="color:#f92672">&gt;</span>true<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:windowLightNavigationBar&#34;</span><span style="color:#f92672">&gt;</span>true<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- 形状（圆角） --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;shapeAppearanceSmallComponent&#34;</span><span style="color:#f92672">&gt;</span>@style/ShapeAppearance.MyApp.SmallComponent<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;shapeAppearanceMediumComponent&#34;</span><span style="color:#f92672">&gt;</span>@style/ShapeAppearance.MyApp.MediumComponent<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;shapeAppearanceLargeComponent&#34;</span><span style="color:#f92672">&gt;</span>@style/ShapeAppearance.MyApp.LargeComponent<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/style&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 自定义形状 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;ShapeAppearance.MyApp.SmallComponent&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;ShapeAppearance.Material3.SmallComponent&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;cornerFamily&#34;</span><span style="color:#f92672">&gt;</span>rounded<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;cornerSize&#34;</span><span style="color:#f92672">&gt;</span>8dp<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/style&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;ShapeAppearance.MyApp.MediumComponent&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;ShapeAppearance.Material3.MediumComponent&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;cornerSize&#34;</span><span style="color:#f92672">&gt;</span>12dp<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/style&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;ShapeAppearance.MyApp.LargeComponent&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;ShapeAppearance.Material3.LargeComponent&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;cornerSize&#34;</span><span style="color:#f92672">&gt;</span>16dp<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/style&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/resources&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/values-night/colors.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 深色模式的颜色会自动被使用 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_primary&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_dark_primary<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;md_theme_light_onPrimary&#34;</span><span style="color:#f92672">&gt;</span>@color/md_theme_dark_onPrimary<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- ... --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/resources&gt;</span>
</span></span></code></pre></div><h5 id="在布局中使用">在布局中使用
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/layout/activity_main.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">android:background=</span><span style="color:#e6db74">&#34;?attr/colorBackground&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 使用主题颜色 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;com.google.android.material.button.MaterialButton</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;Primary Button&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:backgroundTint=</span><span style="color:#e6db74">&#34;?attr/colorPrimary&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;?attr/colorOnPrimary&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 次要按钮 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;com.google.android.material.button.MaterialButton</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">style=</span><span style="color:#e6db74">&#34;@style/Widget.Material3.Button.TonalButton&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;Secondary Button&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- 卡片使用 Surface 色 --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;com.google.android.material.card.MaterialCardView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">app:cardBackgroundColor=</span><span style="color:#e6db74">&#34;?attr/colorSurface&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">app:cardElevation=</span><span style="color:#e6db74">&#34;2dp&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_width=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:layout_height=</span><span style="color:#e6db74">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:text=</span><span style="color:#e6db74">&#34;Card Content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">android:textColor=</span><span style="color:#e6db74">&#34;?attr/colorOnSurface&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/com.google.android.material.card.MaterialCardView&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><hr>
<h4 id="compose主题">Compose主题
</h4><h5 id="完整compose主题实现">完整Compose主题实现
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// ui/theme/Color.kt
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">package</span> com.example.myapp.ui.theme
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.graphics.Color
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Light Theme Colors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> md_theme_light_primary = Color(<span style="color:#ae81ff">0xFF6750A4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_onPrimary = Color(<span style="color:#ae81ff">0xFFFFFFFF</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_primaryContainer = Color(<span style="color:#ae81ff">0xFFEADDFF</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_onPrimaryContainer = Color(<span style="color:#ae81ff">0xFF21005D</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_secondary = Color(<span style="color:#ae81ff">0xFF625B71</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_onSecondary = Color(<span style="color:#ae81ff">0xFFFFFFFF</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_secondaryContainer = Color(<span style="color:#ae81ff">0xFFE8DEF8</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_onSecondaryContainer = Color(<span style="color:#ae81ff">0xFF1D192B</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_surface = Color(<span style="color:#ae81ff">0xFFFFFBFE</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_onSurface = Color(<span style="color:#ae81ff">0xFF1C1B1F</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_light_background = Color(<span style="color:#ae81ff">0xFFFFFBFE</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Dark Theme Colors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">val</span> md_theme_dark_primary = Color(<span style="color:#ae81ff">0xFFD0BCFF</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_onPrimary = Color(<span style="color:#ae81ff">0xFF381E72</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_primaryContainer = Color(<span style="color:#ae81ff">0xFF4F378B</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_onPrimaryContainer = Color(<span style="color:#ae81ff">0xFFEADDFF</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_secondary = Color(<span style="color:#ae81ff">0xFFCCC2DC</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_onSecondary = Color(<span style="color:#ae81ff">0xFF332D41</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_surface = Color(<span style="color:#ae81ff">0xFF1C1B1F</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_onSurface = Color(<span style="color:#ae81ff">0xFFE6E1E5</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> md_theme_dark_background = Color(<span style="color:#ae81ff">0xFF1C1B1F</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ui/theme/Theme.kt
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">package</span> com.example.myapp.ui.theme
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> android.app.Activity
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> android.os.Build
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.foundation.isSystemInDarkTheme
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.material3.*
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.runtime.Composable
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.runtime.SideEffect
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.graphics.toArgb
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.platform.LocalContext
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.platform.LocalView
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.core.view.WindowCompat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> LightColorScheme = lightColorScheme(
</span></span><span style="display:flex;"><span>    primary = md_theme_light_primary,
</span></span><span style="display:flex;"><span>    onPrimary = md_theme_light_onPrimary,
</span></span><span style="display:flex;"><span>    primaryContainer = md_theme_light_primaryContainer,
</span></span><span style="display:flex;"><span>    onPrimaryContainer = md_theme_light_onPrimaryContainer,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    secondary = md_theme_light_secondary,
</span></span><span style="display:flex;"><span>    onSecondary = md_theme_light_onSecondary,
</span></span><span style="display:flex;"><span>    secondaryContainer = md_theme_light_secondaryContainer,
</span></span><span style="display:flex;"><span>    onSecondaryContainer = md_theme_light_onSecondaryContainer,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    surface = md_theme_light_surface,
</span></span><span style="display:flex;"><span>    onSurface = md_theme_light_onSurface,
</span></span><span style="display:flex;"><span>    background = md_theme_light_background
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> DarkColorScheme = darkColorScheme(
</span></span><span style="display:flex;"><span>    primary = md_theme_dark_primary,
</span></span><span style="display:flex;"><span>    onPrimary = md_theme_dark_onPrimary,
</span></span><span style="display:flex;"><span>    primaryContainer = md_theme_dark_primaryContainer,
</span></span><span style="display:flex;"><span>    onPrimaryContainer = md_theme_dark_onPrimaryContainer,
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    secondary = md_theme_dark_secondary,
</span></span><span style="display:flex;"><span>    onSecondary = md_theme_dark_onSecondary,
</span></span><span style="display:flex;"><span>    surface = md_theme_dark_surface,
</span></span><span style="display:flex;"><span>    onSurface = md_theme_dark_onSurface,
</span></span><span style="display:flex;"><span>    background = md_theme_dark_background
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">MyAppTheme</span>(
</span></span><span style="display:flex;"><span>    darkTheme: Boolean = isSystemInDarkTheme(),
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 启用 Dynamic Color（Android 12+）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    dynamicColor: Boolean = <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>    content: <span style="color:#a6e22e">@Composable</span> () <span style="color:#f92672">-&gt;</span> Unit
</span></span><span style="display:flex;"><span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> colorScheme = <span style="color:#66d9ef">when</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Android 12+ 支持 Dynamic Color
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        dynamicColor <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">Build</span>.<span style="color:#a6e22e">VERSION</span>.SDK_INT <span style="color:#f92672">&gt;=</span> <span style="color:#a6e22e">Build</span>.<span style="color:#a6e22e">VERSION_CODES</span>.S <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">val</span> context = <span style="color:#a6e22e">LocalContext</span>.current
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (darkTheme) dynamicDarkColorScheme(context) 
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> dynamicLightColorScheme(context)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 回退到静态主题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        darkTheme <span style="color:#f92672">-&gt;</span> DarkColorScheme
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span> <span style="color:#f92672">-&gt;</span> LightColorScheme
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 设置状态栏颜色
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">val</span> view = <span style="color:#a6e22e">LocalView</span>.current
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (!view.isInEditMode) {
</span></span><span style="display:flex;"><span>        SideEffect {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">val</span> window = (view.context <span style="color:#66d9ef">as</span> Activity).window
</span></span><span style="display:flex;"><span>            window.statusBarColor = colorScheme.primary.toArgb()
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">WindowCompat</span>.getInsetsController(window, view).isAppearanceLightStatusBars = !darkTheme
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    MaterialTheme(
</span></span><span style="display:flex;"><span>        colorScheme = colorScheme,
</span></span><span style="display:flex;"><span>        typography = Typography,
</span></span><span style="display:flex;"><span>        content = content
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ui/theme/Type.kt
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">package</span> com.example.myapp.ui.theme
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.material3.Typography
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.text.TextStyle
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.text.font.FontFamily
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.text.font.FontWeight
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> androidx.compose.ui.unit.sp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">val</span> Typography = Typography(
</span></span><span style="display:flex;"><span>    bodyLarge = TextStyle(
</span></span><span style="display:flex;"><span>        fontFamily = <span style="color:#a6e22e">FontFamily</span>.Default,
</span></span><span style="display:flex;"><span>        fontWeight = <span style="color:#a6e22e">FontWeight</span>.Normal,
</span></span><span style="display:flex;"><span>        fontSize = <span style="color:#ae81ff">16.</span>sp,
</span></span><span style="display:flex;"><span>        lineHeight = <span style="color:#ae81ff">24.</span>sp,
</span></span><span style="display:flex;"><span>        letterSpacing = <span style="color:#ae81ff">0.5</span>.sp
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    titleLarge = TextStyle(
</span></span><span style="display:flex;"><span>        fontFamily = <span style="color:#a6e22e">FontFamily</span>.Default,
</span></span><span style="display:flex;"><span>        fontWeight = <span style="color:#a6e22e">FontWeight</span>.Normal,
</span></span><span style="display:flex;"><span>        fontSize = <span style="color:#ae81ff">22.</span>sp,
</span></span><span style="display:flex;"><span>        lineHeight = <span style="color:#ae81ff">28.</span>sp,
</span></span><span style="display:flex;"><span>        letterSpacing = <span style="color:#ae81ff">0.</span>sp
</span></span><span style="display:flex;"><span>    ),
</span></span><span style="display:flex;"><span>    labelSmall = TextStyle(
</span></span><span style="display:flex;"><span>        fontFamily = <span style="color:#a6e22e">FontFamily</span>.Default,
</span></span><span style="display:flex;"><span>        fontWeight = <span style="color:#a6e22e">FontWeight</span>.Medium,
</span></span><span style="display:flex;"><span>        fontSize = <span style="color:#ae81ff">11.</span>sp,
</span></span><span style="display:flex;"><span>        lineHeight = <span style="color:#ae81ff">16.</span>sp,
</span></span><span style="display:flex;"><span>        letterSpacing = <span style="color:#ae81ff">0.5</span>.sp
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// MainActivity.kt
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> : ComponentActivity() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>        setContent {
</span></span><span style="display:flex;"><span>            MyAppTheme {
</span></span><span style="display:flex;"><span>                Surface(
</span></span><span style="display:flex;"><span>                    modifier = <span style="color:#a6e22e">Modifier</span>.fillMaxSize(),
</span></span><span style="display:flex;"><span>                    color = <span style="color:#a6e22e">MaterialTheme</span>.colorScheme.background
</span></span><span style="display:flex;"><span>                ) {
</span></span><span style="display:flex;"><span>                    AppContent()
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">AppContent</span>() {
</span></span><span style="display:flex;"><span>    Column(
</span></span><span style="display:flex;"><span>        modifier = Modifier
</span></span><span style="display:flex;"><span>            .fillMaxSize()
</span></span><span style="display:flex;"><span>            .padding(<span style="color:#ae81ff">16.</span>dp)
</span></span><span style="display:flex;"><span>    ) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 使用主题颜色
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Button(
</span></span><span style="display:flex;"><span>            onClick = { },
</span></span><span style="display:flex;"><span>            colors = <span style="color:#a6e22e">ButtonDefaults</span>.buttonColors(
</span></span><span style="display:flex;"><span>                containerColor = <span style="color:#a6e22e">MaterialTheme</span>.colorScheme.primary,
</span></span><span style="display:flex;"><span>                contentColor = <span style="color:#a6e22e">MaterialTheme</span>.colorScheme.onPrimary
</span></span><span style="display:flex;"><span>            )
</span></span><span style="display:flex;"><span>        ) {
</span></span><span style="display:flex;"><span>            Text(<span style="color:#e6db74">&#34;Primary Button&#34;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 使用 Surface 卡片
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Card(
</span></span><span style="display:flex;"><span>            modifier = Modifier
</span></span><span style="display:flex;"><span>                .fillMaxWidth()
</span></span><span style="display:flex;"><span>                .padding(top = <span style="color:#ae81ff">16.</span>dp),
</span></span><span style="display:flex;"><span>            colors = <span style="color:#a6e22e">CardDefaults</span>.cardColors(
</span></span><span style="display:flex;"><span>                containerColor = <span style="color:#a6e22e">MaterialTheme</span>.colorScheme.surfaceVariant
</span></span><span style="display:flex;"><span>            )
</span></span><span style="display:flex;"><span>        ) {
</span></span><span style="display:flex;"><span>            Text(
</span></span><span style="display:flex;"><span>                text = <span style="color:#e6db74">&#34;Card Content&#34;</span>,
</span></span><span style="display:flex;"><span>                style = <span style="color:#a6e22e">MaterialTheme</span>.typography.bodyLarge,
</span></span><span style="display:flex;"><span>                color = <span style="color:#a6e22e">MaterialTheme</span>.colorScheme.onSurfaceVariant,
</span></span><span style="display:flex;"><span>                modifier = <span style="color:#a6e22e">Modifier</span>.padding(<span style="color:#ae81ff">16.</span>dp)
</span></span><span style="display:flex;"><span>            )
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h4 id="深色模式">深色模式
</h4><p>完整实现方法</p>
<h5 id="1系统跟随">1.系统跟随
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// 使用 DayNight 主题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>&lt;style name=<span style="color:#e6db74">&#34;Theme.MyApp&#34;</span> parent=<span style="color:#e6db74">&#34;Theme.Material3.DayNight&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;!<span style="color:#f92672">--</span> 自动根据系统设置切换 <span style="color:#f92672">--</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/style&gt;
</span></span></code></pre></div><h5 id="2-手动切换">2. 手动切换
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// 提供用户选择
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SettingsActivity</span> : AppCompatActivity() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 获取当前模式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">val</span> currentMode = <span style="color:#a6e22e">AppCompatDelegate</span>.getDefaultNightMode()
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// 切换模式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">when</span> (userSelection) {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;light&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">AppCompatDelegate</span>.setDefaultNightMode(<span style="color:#a6e22e">AppCompatDelegate</span>.MODE_NIGHT_NO)
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;dark&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">AppCompatDelegate</span>.setDefaultNightMode(<span style="color:#a6e22e">AppCompatDelegate</span>.MODE_NIGHT_YES)
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;system&#34;</span> <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">AppCompatDelegate</span>.setDefaultNightMode(<span style="color:#a6e22e">AppCompatDelegate</span>.MODE_NIGHT_FOLLOW_SYSTEM)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Compose 中切换
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">@Composable</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">ThemeSettings</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> darkMode <span style="color:#66d9ef">by</span> remember { mutableStateOf(<span style="color:#66d9ef">false</span>) }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    MyAppTheme(darkTheme = darkMode) {
</span></span><span style="display:flex;"><span>        Switch(
</span></span><span style="display:flex;"><span>            checked = darkMode,
</span></span><span style="display:flex;"><span>            onCheckedChange = { darkMode = <span style="color:#66d9ef">it</span> }
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="3-深色模式注意事项">3. 深色模式注意事项
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 为深色模式提供专用资源 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/values-night/colors.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;color</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;window_background&#34;</span><span style="color:#f92672">&gt;</span>#121212<span style="color:#f92672">&lt;/color&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/drawable-night/ic_logo.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 深色模式下使用不同的图标 --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- res/values-night/themes.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;style</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;Theme.MyApp&#34;</span> <span style="color:#a6e22e">parent=</span><span style="color:#e6db74">&#34;Theme.Material3.DayNight&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;item</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;android:windowLightStatusBar&#34;</span><span style="color:#f92672">&gt;</span>false<span style="color:#f92672">&lt;/item&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/style&gt;</span>
</span></span></code></pre></div><hr>
<h4 id="最佳实践">最佳实践
</h4><h5 id="1-使用material-3">1. 使用Material 3
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// ✅ 使用 M3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   implementation(<span style="color:#e6db74">&#34;com.google.android.material:material:1.12.0&#34;</span>)
</span></span><span style="display:flex;"><span>   parent=<span style="color:#e6db74">&#34;Theme.Material3.DayNight&#34;</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// ❌ 不要用旧版本
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   parent=<span style="color:#e6db74">&#34;Theme.MaterialComponents.DayNight&#34;</span>
</span></span></code></pre></div><h5 id="2-启用dynamic-color">2. 启用Dynamic Color
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// ✅ 让应用更个性化
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#a6e22e">DynamicColors</span>.applyToActivitiesIfAvailable(<span style="color:#66d9ef">this</span>)
</span></span></code></pre></div><h5 id="3-使用语义化颜色">3. 使用语义化颜色
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// ✅ 使用主题属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   android:textColor=<span style="color:#e6db74">&#34;?attr/colorOnSurface&#34;</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// ❌ 不要硬编码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   android:textColor=<span style="color:#e6db74">&#34;#000000&#34;</span>
</span></span></code></pre></div><h5 id="4-提供深色模式">4. 提供深色模式
</h5><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#75715e">// ✅ 支持系统深色模式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   parent=<span style="color:#e6db74">&#34;Theme.Material3.DayNight&#34;</span>
</span></span><span style="display:flex;"><span>   
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// ❌ 只支持亮色
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   parent=<span style="color:#e6db74">&#34;Theme.Material3.Light&#34;</span>
</span></span></code></pre></div><hr>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 zed的博客
    </section>
    
    <section class="powerby">
        使用 <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> 构建 <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.30.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.0640c0f9745d7bd65b558574cdb67852b46437c1f807526bf043aebc566fd6e4.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
