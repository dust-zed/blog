<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='è¿™ä¸ªcrateæä¾›äº†åœ¨å­—ç¬¦ä¸²ä¸­æœç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…(regular expressionç®€ç§°regex)çš„ä¾‹ç¨‹ã€‚æœ¬åº“æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å’Œå…¶ä»–æ­£åˆ™å¼•æ“ç›¸ä¼¼ï¼Œä½†æ˜¯ç¼ºå°‘äº†ä¸€äº›æ— æ³•é«˜æ•ˆå®ç°çš„åŠŸèƒ½ã€‚åŒ…æ‹¬ä½†ä¸é™äºï¼Œlook-aroundå’Œbackreferncesã€‚ç›¸åº”çš„ï¼Œæœ¬åº“çš„æ­£åˆ™æœç´¢æœ€å·®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(m * n)ï¼Œmå’Œæ­£åˆ™è¡¨è¾¾å¼æˆæ­£æ¯”ï¼Œnå’Œè¢«æœç´¢çš„å­—ç¬¦ä¸²æˆæ­£æ¯”ã€‚\nå¦‚æœä½ åªéœ€è¦APIæ–‡æ¡£ï¼Œåªéœ€è¦è·³è½¬è‡³[Regex][https://docs.rs/regex/latest/regex/struct.Regex.html]ç±»å‹ã€‚å¦åˆ™ï¼Œæ­¤å¤„æ˜¯å¿«é€Ÿç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•è§£æç±»ä¼¼grepç¨‹åºçš„è¾“å‡ºï¼š\nuse regex::Regex; let re = Regex::new(r"(?m)^([^:]+):([0-9]+):(.+)$").unwrap(); let hay = "\\ path/to/foo:54:Blue Harvest path/to/bar:90:Something, Something, Something, Dark Side path/to/baz:3:It&#39;s a Trap! "; let mut results = vec![]; for (_, [path, lineno, line]) in re.captures_iter(hay).map(|c| c.extract()) { results.push((path, lineno.parse::<u64>()?, line)); } assert_eq!(results, vec![ ("path/to/foo", 54, "Blue Harvest"), ("path/to/bar", 90, "Something, Something, Something, Dark Side"), ("path/to/baz", 3, "It&#39;s a Trap!"), ]); æ¦‚è¿° æœ¬åº“çš„ä¸»è¦ç±»å‹æ˜¯Regexã€‚å…¶é‡è¦çš„æ–¹æ³•å¦‚ä¸‹ï¼š\nRegex::newä½¿ç”¨é»˜è®¤é…ç½®ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ã€‚RegexBuilderå…è®¸é…ç½®éé»˜è®¤é…ç½®ã€‚ï¼ˆä¾‹å¦‚ï¼Œä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ï¼Œè¯¦ç»†æ¨¡å¼ç­‰ã€‚ï¼‰ Regex::is_match æŠ¥å‘Šåœ¨ç‰¹å®šçš„haystackæ˜¯å¦å­˜åœ¨åŒ¹é…ã€‚ Regex::findæŠ¥å‘ŠåŒ¹é…é¡¹åœ¨haystackçš„å­—èŠ‚åç§»ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚Regex::find_iterè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨äºéå†æ‰€æœ‰åŒ¹é…é¡¹ã€‚ Regex::capturesè¿”å›Captures,å®ƒæŠ¥å‘Šäº†åœ¨haystackä¸­åŒ¹é…çš„å­—èŠ‚åç§»é‡ä»¥åŠä»haystackä¸­çš„regexåŒ¹é…çš„æ¯ä¸ªæ•è·ç»„çš„å­—èŠ‚åç§»é‡ã€‚ ä¹Ÿæœ‰RegexSetï¼Œå®ƒå…è®¸åœ¨ä¸€æ¬¡æœç´¢ä¸­æœç´¢å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ç„¶è€Œï¼Œå®ƒåªæŠ¥å‘ŠåŒ¹é…çš„æ¨¡å¼è€Œä¸æŠ¥å‘ŠåŒ¹é…çš„å­—èŠ‚åç§»é‡ã€‚\næ­¤å¤–ï¼Œé¡¶çº§crateæ–‡æ¡£ç»„ç»‡å¦‚ä¸‹ï¼š\nUsageå±•ç¤ºäº†å¦‚ä½•åœ¨Rustå·¥ç¨‹ä¸­æ·»åŠ regexã€‚ Examplesæä¾›äº†æœ‰é™çš„æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹ã€‚ Performanceæä¾›äº†å¦‚ä½•ä¼˜åŒ–æ­£åˆ™æœç´¢é€Ÿåº¦çš„ç®€å•æ€»ç»“ã€‚ [Unicode][]è®¨è®ºäº†å¯¹non-ASCIIçš„æ”¯æŒã€‚ [Syntax][]åˆ—ä¸¾äº†æœ¬åº“æ˜ç¡®æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚ [Untrusted input][]è®¨è®ºäº†æœ¬åº“å¦‚ä½•å¤„ç†ä¸å—ä¿¡ä»»çš„regexæˆ–haystackã€‚ [Crate features][]è®°å½•äº†è¿™ä¸ªåº“å¯ä»¥è¢«å¯ç”¨æˆ–ç¦ç”¨çš„ç‰¹æ€§ã€‚ [Other crates][]ä¸æ­£åˆ™å®¶æ—ä¸­å…¶ä»–åº“é“¾æ¥ã€‚ Usage regexåœ¨ [crates.io][https://crates.io/crates/regex]ä¸Šï¼Œå¯ä»¥é€šè¿‡åœ¨é¡¹ç›®Cargo.tomlæ–‡ä»¶æ·»åŠ regexåˆ°ä½ çš„ä¾èµ–é¡¹æ¥ä½¿ç”¨ã€‚æ›´ç®€å•çš„æ–¹å¼ï¼Œåªéœ€è¦cargo run regexã€‚\n'><title>Regex</title><link rel=canonical href=https://www.dust-zed.site/rust/docs_rs_zh/regex/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="Regex"><meta property='og:description' content='è¿™ä¸ªcrateæä¾›äº†åœ¨å­—ç¬¦ä¸²ä¸­æœç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…(regular expressionç®€ç§°regex)çš„ä¾‹ç¨‹ã€‚æœ¬åº“æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å’Œå…¶ä»–æ­£åˆ™å¼•æ“ç›¸ä¼¼ï¼Œä½†æ˜¯ç¼ºå°‘äº†ä¸€äº›æ— æ³•é«˜æ•ˆå®ç°çš„åŠŸèƒ½ã€‚åŒ…æ‹¬ä½†ä¸é™äºï¼Œlook-aroundå’Œbackreferncesã€‚ç›¸åº”çš„ï¼Œæœ¬åº“çš„æ­£åˆ™æœç´¢æœ€å·®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(m * n)ï¼Œmå’Œæ­£åˆ™è¡¨è¾¾å¼æˆæ­£æ¯”ï¼Œnå’Œè¢«æœç´¢çš„å­—ç¬¦ä¸²æˆæ­£æ¯”ã€‚\nå¦‚æœä½ åªéœ€è¦APIæ–‡æ¡£ï¼Œåªéœ€è¦è·³è½¬è‡³[Regex][https://docs.rs/regex/latest/regex/struct.Regex.html]ç±»å‹ã€‚å¦åˆ™ï¼Œæ­¤å¤„æ˜¯å¿«é€Ÿç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•è§£æç±»ä¼¼grepç¨‹åºçš„è¾“å‡ºï¼š\nuse regex::Regex; let re = Regex::new(r"(?m)^([^:]+):([0-9]+):(.+)$").unwrap(); let hay = "\\ path/to/foo:54:Blue Harvest path/to/bar:90:Something, Something, Something, Dark Side path/to/baz:3:It&#39;s a Trap! "; let mut results = vec![]; for (_, [path, lineno, line]) in re.captures_iter(hay).map(|c| c.extract()) { results.push((path, lineno.parse::<u64>()?, line)); } assert_eq!(results, vec![ ("path/to/foo", 54, "Blue Harvest"), ("path/to/bar", 90, "Something, Something, Something, Dark Side"), ("path/to/baz", 3, "It&#39;s a Trap!"), ]); æ¦‚è¿° æœ¬åº“çš„ä¸»è¦ç±»å‹æ˜¯Regexã€‚å…¶é‡è¦çš„æ–¹æ³•å¦‚ä¸‹ï¼š\nRegex::newä½¿ç”¨é»˜è®¤é…ç½®ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ã€‚RegexBuilderå…è®¸é…ç½®éé»˜è®¤é…ç½®ã€‚ï¼ˆä¾‹å¦‚ï¼Œä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ï¼Œè¯¦ç»†æ¨¡å¼ç­‰ã€‚ï¼‰ Regex::is_match æŠ¥å‘Šåœ¨ç‰¹å®šçš„haystackæ˜¯å¦å­˜åœ¨åŒ¹é…ã€‚ Regex::findæŠ¥å‘ŠåŒ¹é…é¡¹åœ¨haystackçš„å­—èŠ‚åç§»ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚Regex::find_iterè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨äºéå†æ‰€æœ‰åŒ¹é…é¡¹ã€‚ Regex::capturesè¿”å›Captures,å®ƒæŠ¥å‘Šäº†åœ¨haystackä¸­åŒ¹é…çš„å­—èŠ‚åç§»é‡ä»¥åŠä»haystackä¸­çš„regexåŒ¹é…çš„æ¯ä¸ªæ•è·ç»„çš„å­—èŠ‚åç§»é‡ã€‚ ä¹Ÿæœ‰RegexSetï¼Œå®ƒå…è®¸åœ¨ä¸€æ¬¡æœç´¢ä¸­æœç´¢å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ç„¶è€Œï¼Œå®ƒåªæŠ¥å‘ŠåŒ¹é…çš„æ¨¡å¼è€Œä¸æŠ¥å‘ŠåŒ¹é…çš„å­—èŠ‚åç§»é‡ã€‚\næ­¤å¤–ï¼Œé¡¶çº§crateæ–‡æ¡£ç»„ç»‡å¦‚ä¸‹ï¼š\nUsageå±•ç¤ºäº†å¦‚ä½•åœ¨Rustå·¥ç¨‹ä¸­æ·»åŠ regexã€‚ Examplesæä¾›äº†æœ‰é™çš„æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹ã€‚ Performanceæä¾›äº†å¦‚ä½•ä¼˜åŒ–æ­£åˆ™æœç´¢é€Ÿåº¦çš„ç®€å•æ€»ç»“ã€‚ [Unicode][]è®¨è®ºäº†å¯¹non-ASCIIçš„æ”¯æŒã€‚ [Syntax][]åˆ—ä¸¾äº†æœ¬åº“æ˜ç¡®æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚ [Untrusted input][]è®¨è®ºäº†æœ¬åº“å¦‚ä½•å¤„ç†ä¸å—ä¿¡ä»»çš„regexæˆ–haystackã€‚ [Crate features][]è®°å½•äº†è¿™ä¸ªåº“å¯ä»¥è¢«å¯ç”¨æˆ–ç¦ç”¨çš„ç‰¹æ€§ã€‚ [Other crates][]ä¸æ­£åˆ™å®¶æ—ä¸­å…¶ä»–åº“é“¾æ¥ã€‚ Usage regexåœ¨ [crates.io][https://crates.io/crates/regex]ä¸Šï¼Œå¯ä»¥é€šè¿‡åœ¨é¡¹ç›®Cargo.tomlæ–‡ä»¶æ·»åŠ regexåˆ°ä½ çš„ä¾èµ–é¡¹æ¥ä½¿ç”¨ã€‚æ›´ç®€å•çš„æ–¹å¼ï¼Œåªéœ€è¦cargo run regexã€‚\n'><meta property='og:url' content='https://www.dust-zed.site/rust/docs_rs_zh/regex/'><meta property='og:site_name' content='zedçš„åšå®¢'><meta property='og:type' content='article'><meta property='article:section' content='Rust'><meta property='article:published_time' content='2025-09-22T12:19:53+08:00'><meta property='article:modified_time' content='2025-09-22T12:19:53+08:00'><meta name=twitter:title content="Regex"><meta name=twitter:description content='è¿™ä¸ªcrateæä¾›äº†åœ¨å­—ç¬¦ä¸²ä¸­æœç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…(regular expressionç®€ç§°regex)çš„ä¾‹ç¨‹ã€‚æœ¬åº“æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å’Œå…¶ä»–æ­£åˆ™å¼•æ“ç›¸ä¼¼ï¼Œä½†æ˜¯ç¼ºå°‘äº†ä¸€äº›æ— æ³•é«˜æ•ˆå®ç°çš„åŠŸèƒ½ã€‚åŒ…æ‹¬ä½†ä¸é™äºï¼Œlook-aroundå’Œbackreferncesã€‚ç›¸åº”çš„ï¼Œæœ¬åº“çš„æ­£åˆ™æœç´¢æœ€å·®çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(m * n)ï¼Œmå’Œæ­£åˆ™è¡¨è¾¾å¼æˆæ­£æ¯”ï¼Œnå’Œè¢«æœç´¢çš„å­—ç¬¦ä¸²æˆæ­£æ¯”ã€‚\nå¦‚æœä½ åªéœ€è¦APIæ–‡æ¡£ï¼Œåªéœ€è¦è·³è½¬è‡³[Regex][https://docs.rs/regex/latest/regex/struct.Regex.html]ç±»å‹ã€‚å¦åˆ™ï¼Œæ­¤å¤„æ˜¯å¿«é€Ÿç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•è§£æç±»ä¼¼grepç¨‹åºçš„è¾“å‡ºï¼š\nuse regex::Regex; let re = Regex::new(r"(?m)^([^:]+):([0-9]+):(.+)$").unwrap(); let hay = "\\ path/to/foo:54:Blue Harvest path/to/bar:90:Something, Something, Something, Dark Side path/to/baz:3:It&#39;s a Trap! "; let mut results = vec![]; for (_, [path, lineno, line]) in re.captures_iter(hay).map(|c| c.extract()) { results.push((path, lineno.parse::<u64>()?, line)); } assert_eq!(results, vec![ ("path/to/foo", 54, "Blue Harvest"), ("path/to/bar", 90, "Something, Something, Something, Dark Side"), ("path/to/baz", 3, "It&#39;s a Trap!"), ]); æ¦‚è¿° æœ¬åº“çš„ä¸»è¦ç±»å‹æ˜¯Regexã€‚å…¶é‡è¦çš„æ–¹æ³•å¦‚ä¸‹ï¼š\nRegex::newä½¿ç”¨é»˜è®¤é…ç½®ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ã€‚RegexBuilderå…è®¸é…ç½®éé»˜è®¤é…ç½®ã€‚ï¼ˆä¾‹å¦‚ï¼Œä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ï¼Œè¯¦ç»†æ¨¡å¼ç­‰ã€‚ï¼‰ Regex::is_match æŠ¥å‘Šåœ¨ç‰¹å®šçš„haystackæ˜¯å¦å­˜åœ¨åŒ¹é…ã€‚ Regex::findæŠ¥å‘ŠåŒ¹é…é¡¹åœ¨haystackçš„å­—èŠ‚åç§»ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚Regex::find_iterè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨äºéå†æ‰€æœ‰åŒ¹é…é¡¹ã€‚ Regex::capturesè¿”å›Captures,å®ƒæŠ¥å‘Šäº†åœ¨haystackä¸­åŒ¹é…çš„å­—èŠ‚åç§»é‡ä»¥åŠä»haystackä¸­çš„regexåŒ¹é…çš„æ¯ä¸ªæ•è·ç»„çš„å­—èŠ‚åç§»é‡ã€‚ ä¹Ÿæœ‰RegexSetï¼Œå®ƒå…è®¸åœ¨ä¸€æ¬¡æœç´¢ä¸­æœç´¢å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ç„¶è€Œï¼Œå®ƒåªæŠ¥å‘ŠåŒ¹é…çš„æ¨¡å¼è€Œä¸æŠ¥å‘ŠåŒ¹é…çš„å­—èŠ‚åç§»é‡ã€‚\næ­¤å¤–ï¼Œé¡¶çº§crateæ–‡æ¡£ç»„ç»‡å¦‚ä¸‹ï¼š\nUsageå±•ç¤ºäº†å¦‚ä½•åœ¨Rustå·¥ç¨‹ä¸­æ·»åŠ regexã€‚ Examplesæä¾›äº†æœ‰é™çš„æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹ã€‚ Performanceæä¾›äº†å¦‚ä½•ä¼˜åŒ–æ­£åˆ™æœç´¢é€Ÿåº¦çš„ç®€å•æ€»ç»“ã€‚ [Unicode][]è®¨è®ºäº†å¯¹non-ASCIIçš„æ”¯æŒã€‚ [Syntax][]åˆ—ä¸¾äº†æœ¬åº“æ˜ç¡®æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚ [Untrusted input][]è®¨è®ºäº†æœ¬åº“å¦‚ä½•å¤„ç†ä¸å—ä¿¡ä»»çš„regexæˆ–haystackã€‚ [Crate features][]è®°å½•äº†è¿™ä¸ªåº“å¯ä»¥è¢«å¯ç”¨æˆ–ç¦ç”¨çš„ç‰¹æ€§ã€‚ [Other crates][]ä¸æ­£åˆ™å®¶æ—ä¸­å…¶ä»–åº“é“¾æ¥ã€‚ Usage regexåœ¨ [crates.io][https://crates.io/crates/regex]ä¸Šï¼Œå¯ä»¥é€šè¿‡åœ¨é¡¹ç›®Cargo.tomlæ–‡ä»¶æ·»åŠ regexåˆ°ä½ çš„ä¾èµ–é¡¹æ¥ä½¿ç”¨ã€‚æ›´ç®€å•çš„æ–¹å¼ï¼Œåªéœ€è¦cargo run regexã€‚\n'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column compact"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_f509edb42ecc0ebd.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>zedçš„åšå®¢</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><li><a href=/android-develop><span>android-develop</span></a></li><li><a href=/basic><span>basic</span></a></li><li><a href=/rust><span>rust</span></a></li><li><a href=/learning-reflection/><span>Learning-Reflections</span></a></li><li><a href=/tutorials/><span>Tutorials</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/rust/>Rust
</a><a href=/categories/docs_rs/>Docs_rs</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/rust/docs_rs_zh/regex/>Regex</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 22, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 9 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p>è¿™ä¸ªcrateæä¾›äº†åœ¨å­—ç¬¦ä¸²ä¸­æœç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…(<code>regular expression</code>ç®€ç§°<code>regex</code>)çš„ä¾‹ç¨‹ã€‚æœ¬åº“æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å’Œå…¶ä»–æ­£åˆ™å¼•æ“ç›¸ä¼¼ï¼Œä½†æ˜¯ç¼ºå°‘äº†ä¸€äº›æ— æ³•é«˜æ•ˆå®ç°çš„åŠŸèƒ½ã€‚åŒ…æ‹¬ä½†ä¸é™äºï¼Œ<code>look-around</code>å’Œ<code>backrefernces</code>ã€‚ç›¸åº”çš„ï¼Œæœ¬åº“çš„æ­£åˆ™æœç´¢æœ€å·®çš„æ—¶é—´å¤æ‚åº¦æ˜¯<code>O(m * n)</code>ï¼Œ<code>m</code>å’Œæ­£åˆ™è¡¨è¾¾å¼æˆæ­£æ¯”ï¼Œ<code>n</code>å’Œè¢«æœç´¢çš„å­—ç¬¦ä¸²æˆæ­£æ¯”ã€‚</p><p>å¦‚æœä½ åªéœ€è¦APIæ–‡æ¡£ï¼Œåªéœ€è¦è·³è½¬è‡³[Regex][https://docs.rs/regex/latest/regex/struct.Regex.html]ç±»å‹ã€‚å¦åˆ™ï¼Œæ­¤å¤„æ˜¯å¿«é€Ÿç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•è§£æç±»ä¼¼grepç¨‹åºçš„è¾“å‡ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?m)^([^:]+):([0-9]+):(.+)$&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> hay <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>path/to/foo:54:Blue Harvest
</span></span></span><span style=display:flex><span><span style=color:#e6db74>path/to/bar:90:Something, Something, Something, Dark Side
</span></span></span><span style=display:flex><span><span style=color:#e6db74>path/to/baz:3:It&#39;s a Trap!
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> results <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec!</span>[];
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (_, [path, lineno, line]) <span style=color:#66d9ef>in</span> re.captures_iter(hay).map(<span style=color:#f92672>|</span>c<span style=color:#f92672>|</span> c.extract()) {
</span></span><span style=display:flex><span>    results.push((path, lineno.parse::<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>u64</span><span style=color:#f92672>&gt;</span>()<span style=color:#f92672>?</span>, line));
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(results, <span style=color:#a6e22e>vec!</span>[
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;path/to/foo&#34;</span>, <span style=color:#ae81ff>54</span>, <span style=color:#e6db74>&#34;Blue Harvest&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;path/to/bar&#34;</span>, <span style=color:#ae81ff>90</span>, <span style=color:#e6db74>&#34;Something, Something, Something, Dark Side&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;path/to/baz&#34;</span>, <span style=color:#ae81ff>3</span>, <span style=color:#e6db74>&#34;It&#39;s a Trap!&#34;</span>),
</span></span><span style=display:flex><span>]);
</span></span></code></pre></div><h4 id=æ¦‚è¿°>æ¦‚è¿°</h4><hr><p>æœ¬åº“çš„ä¸»è¦ç±»å‹æ˜¯<code>Regex</code>ã€‚å…¶é‡è¦çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li><code>Regex::new</code>ä½¿ç”¨é»˜è®¤é…ç½®ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ã€‚<code>RegexBuilder</code>å…è®¸é…ç½®éé»˜è®¤é…ç½®ã€‚ï¼ˆä¾‹å¦‚ï¼Œä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ï¼Œè¯¦ç»†æ¨¡å¼ç­‰ã€‚ï¼‰</li><li><code>Regex::is_match</code> æŠ¥å‘Šåœ¨ç‰¹å®šçš„haystackæ˜¯å¦å­˜åœ¨åŒ¹é…ã€‚</li><li><code>Regex::find</code>æŠ¥å‘ŠåŒ¹é…é¡¹åœ¨haystackçš„å­—èŠ‚åç§»ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚<code>Regex::find_iter</code>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨äºéå†æ‰€æœ‰åŒ¹é…é¡¹ã€‚</li><li><code>Regex::captures</code>è¿”å›<code>Captures</code>,å®ƒæŠ¥å‘Šäº†åœ¨haystackä¸­åŒ¹é…çš„å­—èŠ‚åç§»é‡ä»¥åŠä»haystackä¸­çš„regexåŒ¹é…çš„æ¯ä¸ªæ•è·ç»„çš„å­—èŠ‚åç§»é‡ã€‚</li></ul><p>ä¹Ÿæœ‰<code>RegexSet</code>ï¼Œå®ƒå…è®¸åœ¨ä¸€æ¬¡æœç´¢ä¸­æœç´¢å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ç„¶è€Œï¼Œå®ƒåªæŠ¥å‘ŠåŒ¹é…çš„æ¨¡å¼è€Œä¸æŠ¥å‘ŠåŒ¹é…çš„å­—èŠ‚åç§»é‡ã€‚</p><p>æ­¤å¤–ï¼Œé¡¶çº§crateæ–‡æ¡£ç»„ç»‡å¦‚ä¸‹ï¼š</p><ul><li><a class=link href=#Usage>Usage</a>å±•ç¤ºäº†å¦‚ä½•åœ¨Rustå·¥ç¨‹ä¸­æ·»åŠ <code>regex</code>ã€‚</li><li><a class=link href=#Examples>Examples</a>æä¾›äº†æœ‰é™çš„æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹ã€‚</li><li><a class=link href=#Performance>Performance</a>æä¾›äº†å¦‚ä½•ä¼˜åŒ–æ­£åˆ™æœç´¢é€Ÿåº¦çš„ç®€å•æ€»ç»“ã€‚</li><li>[Unicode][]è®¨è®ºäº†å¯¹non-ASCIIçš„æ”¯æŒã€‚</li><li>[Syntax][]åˆ—ä¸¾äº†æœ¬åº“æ˜ç¡®æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚</li><li>[Untrusted input][]è®¨è®ºäº†æœ¬åº“å¦‚ä½•å¤„ç†ä¸å—ä¿¡ä»»çš„regexæˆ–haystackã€‚</li><li>[Crate features][]è®°å½•äº†è¿™ä¸ªåº“å¯ä»¥è¢«å¯ç”¨æˆ–ç¦ç”¨çš„ç‰¹æ€§ã€‚</li><li>[Other crates][]ä¸æ­£åˆ™å®¶æ—ä¸­å…¶ä»–åº“é“¾æ¥ã€‚</li></ul><h4 id=usage>Usage</h4><p><code>regex</code>åœ¨ [crates.io][https://crates.io/crates/regex]ä¸Šï¼Œå¯ä»¥é€šè¿‡åœ¨é¡¹ç›®<code>Cargo.toml</code>æ–‡ä»¶æ·»åŠ <code>regex</code>åˆ°ä½ çš„ä¾èµ–é¡¹æ¥ä½¿ç”¨ã€‚æ›´ç®€å•çš„æ–¹å¼ï¼Œåªéœ€è¦<code>cargo run regex</code>ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®ï¼Œæ·»åŠ äº†å¯¹ <code>regex</code> çš„ä¾èµ–ï¼Œåˆ›å»ºäº†æ­£åˆ™æœç´¢çš„æºä»£ç ï¼Œç„¶åè¿è¡Œäº†ç¨‹åºã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œåœ¨æ–°ç›®å½•æ–°å»ºé¡¹ç›®ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ mkdir regex-example
</span></span><span style=display:flex><span>$ cd regex-example
</span></span><span style=display:flex><span>$ crago init
</span></span></code></pre></div><p>ç¬¬äºŒæ­¥ï¼Œæ·»åŠ <code>regex</code>ä¾èµ–ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cargo add regex
</span></span></code></pre></div><p>ç¬¬ä¸‰æ­¥ï¼šç¼–è¾‘<code>src/main.rs</code>ï¼Œç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢å…¶æºç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;Hello (?&lt;name&gt;\w+)!&#34;</span>).unwrap();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> Some(caps) <span style=color:#f92672>=</span> re.captures(<span style=color:#e6db74>&#34;Hello Murphy!&#34;</span>) <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>println!</span>(<span style=color:#e6db74>&#34;no match!&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>println!</span>(<span style=color:#e6db74>&#34;The name is: </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, <span style=color:#f92672>&amp;</span>caps[<span style=color:#e6db74>&#34;name&#34;</span>]);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ç¬¬å››æ­¥ï¼Œæ‰§è¡Œ<code>cargo run</code>è¿è¡Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cargo run
</span></span><span style=display:flex><span>   Compiling memchr v2.5.0
</span></span><span style=display:flex><span>   Compiling regex-syntax v0.7.1
</span></span><span style=display:flex><span>   Compiling aho-corasick v1.0.1
</span></span><span style=display:flex><span>   Compiling regex v1.8.1
</span></span><span style=display:flex><span>   Compiling regex-example v0.1.0 <span style=color:#f92672>(</span>/tmp/regex-example<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    Finished dev <span style=color:#f92672>[</span>unoptimized + debuginfo<span style=color:#f92672>]</span> target<span style=color:#f92672>(</span>s<span style=color:#f92672>)</span> in 4.22s
</span></span><span style=display:flex><span>     Running <span style=color:#e6db74>`</span>target/debug/regex-example<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>The name is: Murphy
</span></span></code></pre></div><p>ç¨‹åºç¬¬ä¸€æ¬¡è¿è¡Œå°†å±•ç¤ºæ›´å¤šè¾“å‡ºï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚ä½†æ˜¯åç»­è¿è¡Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ä¾èµ–é¡¹ã€‚ã€</p><h4 id=examples>Examples</h4><hr><p>æœ¬èŠ‚æä¾›äº†ä¸€äº›ç¤ºä¾‹ï¼Œä»¥æ•™ç¨‹é£æ ¼å±•ç¤ºå¦‚ä½•ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨haystackä¸­è¿›è¡Œæœç´¢ã€‚APIæ–‡æ¡£ä¸­è¿˜æœ‰æ›´å¤šç¤ºä¾‹ã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæœ‰å¿…è¦å®šä¹‰ä¸€äº›æœ¯è¯­ï¼š</p><ul><li><strong>regex</strong>æ˜¯ç±»å‹ä¸º<code>Regex</code>çš„å€¼ã€‚æˆ‘ä»¬ç”¨<code>re</code>ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„å˜é‡åã€‚</li><li><strong>pattern</strong>ç”¨äºæ„å»ºæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ç”¨<code>pat</code>ä½œä¸ºæ¨¡å¼çš„å˜é‡åã€‚</li><li><strong>haystack</strong>æ˜¯è¢«æ­£åˆ™è¡¨è¾¾å¼æœç´¢çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ç”¨<code>hay</code>ä½œä¸ºhaystackçš„å˜é‡åã€‚</li></ul><p>æœ‰æ—¶å€™â€œregexâ€å’Œâ€œpatternâ€è¿™ä¸¤ä¸ªè¯ä¼šè¢«äº’æ¢ä½¿ç”¨ã€‚</p><p>åœ¨è¿™ä¸ªcrateä¸­ï¼Œå¸¸è§„è¡¨è¾¾å¼çš„ä¸€èˆ¬ä½¿ç”¨æ–¹æ³•æ˜¯å°†ä¸€ä¸ªæ¨¡å¼ç¼–è¯‘æˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç„¶åä½¿ç”¨è¯¥æ­£åˆ™è¡¨è¾¾å¼æ¥æœç´¢ã€åˆ†å‰²æˆ–æ›¿æ¢å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚</p><h5 id=example-find-a-middle-intial>Example: find a middle intial</h5><hr><p>æˆ‘ä»¬ä»ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­å¼€å§‹ï¼šä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºæŸ¥æ‰¾ç‰¹å®šçš„åç§°ï¼Œä½†ä½¿ç”¨é€šé…ç¬¦æ¥åŒ¹é…ä¸­é—´åã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// We use &#39;unwrap()&#39; here because it would be a bug in our program if the
</span></span></span><span style=display:flex><span><span style=color:#75715e>// pattern failed to compile to a regex. Panicking in the presence of a bug
</span></span></span><span style=display:flex><span><span style=color:#75715e>// is okay.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;Homer (.)\. Simpson&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> hay <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Homer J. Simpson&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> Some(caps) <span style=color:#f92672>=</span> re.captures(hay) <span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> };
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(<span style=color:#e6db74>&#34;J&#34;</span>, <span style=color:#f92672>&amp;</span>caps[<span style=color:#ae81ff>1</span>]);
</span></span></code></pre></div><p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­æœ‰äº›å€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼š</p><ul><li><code>.</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ¨¡å¼å…ƒå­—ç¬¦ï¼Œè¡¨ç¤ºâ€œåŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ï¼Œé™¤äº†æ¢è¡Œç¬¦ã€‚â€ï¼ˆæ›´ç²¾ç¡®åœ°è¯´ï¼Œåœ¨è¿™ä¸ª crate ä¸­ï¼Œè¡¨ç¤ºâ€œåŒ¹é…ä»»ä½• UTF-8 ç¼–ç çš„ä»»ä½• Unicode æ ‡é‡å€¼ï¼Œé™¤äº† \nã€‚â€ï¼‰</li><li>æˆ‘ä»¬å¯ä»¥ç”¨è½¬ä¹‰å­—ç¬¦æ¥åŒ¹é…å®é™…çš„ç‚¹å·ï¼Œå³<code> \.</code>ã€‚</li><li>æˆ‘ä»¬ä½¿ç”¨ Rust çš„åŸå§‹å­—ç¬¦ä¸²æ¥é¿å…åœ¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼è¯­æ³•å’Œ Rust çš„å­—ç¬¦ä¸²å­—é¢é‡è¯­æ³•ä¸­å¤„ç†è½¬ä¹‰åºåˆ—ã€‚å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>\\.</code>å»åŒ¹é…å­—ç¬¦<code>.</code>ã€‚<code>r"\."</code>å’Œ<code>\\.</code>æ˜¯ç­‰æ•ˆçš„æ¨¡å¼ã€‚</li><li>æˆ‘ä»¬å°†é€šé…ç¬¦<code> \.</code> æŒ‡ä»¤æ”¾åœ¨æ‹¬å·ä¸­ã€‚è¿™äº›æ‹¬å·å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œè¡¨ç¤ºâ€œå°† haystack ä¸­ä¸è¿™äº›æ‹¬å·åŒ¹é…çš„éƒ¨åˆ†ä½œä¸ºæ•è·ç»„å¯ç”¨â€ã€‚æ‰¾åˆ°åŒ¹é…åï¼Œæˆ‘ä»¬ä½¿ç”¨ &amp;caps[1] è®¿é—®æ­¤æ•è·ç»„ã€‚</li></ul><p>å¦åˆ™ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>re.captures(hay) </code>æ‰§è¡Œæœç´¢ï¼Œå¹¶åœ¨æ²¡æœ‰åŒ¹é…æ—¶ä»æˆ‘ä»¬çš„å‡½æ•°ä¸­è¿”å›ã€‚ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡è¯¢é—®ä¸æ•è·ç»„ç´¢å¼•ä¸º<code>1</code>çš„éƒ¨åˆ†åŒ¹é…çš„haystackçš„é‚£ä¸€éƒ¨åˆ†æ¥å¼•ç”¨ä¸­é—´åã€‚ï¼ˆç´¢å¼•ä¸º0çš„æ•è·ç»„æ˜¯éšå¼çš„ï¼Œæ€»æ˜¯å¯¹åº”æ•´ä¸ªåŒ¹é…ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé‚£å°±æ˜¯<code>Homer J. Simpson</code>ã€‚ï¼‰</p><h5 id=example-named-capture-groups>Example: named capture groups</h5><hr><p>åœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¸­é—´åˆå§‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®è°ƒæ•´ä¸€ä¸‹æ¨¡å¼ï¼Œç»™åŒ¹é…ä¸­é—´åˆå§‹çš„ç»„å‘½åï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span><span style=color:#75715e>// Note that (?P&lt;middle&gt;.) is a different way to spell the same thing.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;Homer (?&lt;middle&gt;.)\. Simpson&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> hay <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Homer J. Simpson&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> Some(caps) <span style=color:#f92672>=</span> re.captures(hay) <span style=color:#66d9ef>else</span> {<span style=color:#66d9ef>return</span>};
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(<span style=color:#e6db74>&#34;J&#34;</span>, <span style=color:#f92672>&amp;</span>caps[<span style=color:#e6db74>&#34;middle&#34;</span>]);
</span></span></code></pre></div><p>ç»™ä¸€ç»„å‘½ååœ¨æ¨¡å¼ä¸­æœ‰å¤šä¸ªç»„æ—¶å¾ˆæœ‰ç”¨ã€‚å®ƒä½¿å¼•ç”¨è¿™äº›ç»„çš„ä»£ç æ›´å®¹æ˜“ç†è§£ã€‚</p><h5 id=example-validating-a-particular-date-format>Example: validating a particular date format</h5><hr><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ç¡®è®¤ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆhaystackï¼‰æ˜¯å¦å®Œå…¨åŒ¹é…æŸä¸ªç‰¹å®šçš„æ—¥æœŸæ ¼å¼ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;^\d{4}-\d{2}-\d{2}$&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert!</span>(re.is_match(<span style=color:#e6db74>&#34;2010-03-14&#34;</span>));
</span></span></code></pre></div><p>æ³¨æ„ <code>^</code> å’Œ <code>$</code> é”šç‚¹çš„ä½¿ç”¨ã€‚åœ¨è¿™ä¸ªcrateä¸­ï¼Œæ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼æœç´¢éƒ½ä¼šåœ¨å…¶æ¨¡å¼çš„å¼€å¤´éšå¼åœ°åŠ ä¸Š<code>(?s:.)*?</code>ï¼Œè¿™ä½¿å¾—æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åœ¨haystackçš„ä»»ä½•ä½ç½®è¿›è¡ŒåŒ¹é…ã€‚æ­£å¦‚ä¸Šé¢æ‰€æåˆ°çš„ï¼Œé”šç‚¹å¯ä»¥ç”¨æ¥ç¡®ä¿æ•´ä¸ªhaystackåŒ¹é…ä¸€ä¸ªæ¨¡å¼ã€‚</p><p>è¿™ä¸ª crate é»˜è®¤æ˜¯ Unicode æ„ŸçŸ¥çš„ï¼Œè¿™æ„å‘³ç€ <code>\d </code>å¯èƒ½ä¼šåŒ¹é…ä½ å¯èƒ½é¢„æœŸçš„æ›´å¤šå†…å®¹ã€‚ä¾‹å¦‚ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;^\d{4}-\d{2}-\d{2}$&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert!</span>(re.is_match(<span style=color:#e6db74>&#34;ğŸšğŸ˜ğŸ™ğŸ˜-ğŸ˜ğŸ›-ğŸ™ğŸœ&#34;</span>));
</span></span></code></pre></div><p>è¦ä»…åŒ¹é…ASCIIåè¿›åˆ¶æ•°å­—ï¼Œä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½æ˜¯ç­‰æ•ˆçš„ï¼š</p><ul><li><code>[0-9]</code></li><li><code>[?-u:\d]</code></li><li><code>[[:digit:]]</code></li><li><code>[\d&&\p{ascii}]</code></li></ul><h5 id=example-find-dates-in-a-haystack>Example: find dates in a haystack</h5><hr><p>åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•éªŒè¯æ•´ä¸ªhaystackæ˜¯å¦å¯¹åº”äºç‰¹å®šçš„æ—¥æœŸæ ¼å¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä»ä¸€å¤§å †æ•°æ®ä¸­æå–å‡ºç‰¹å®šæ ¼å¼çœ‹èµ·æ¥åƒæ—¥æœŸçš„æ‰€æœ‰ä¸œè¥¿ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿè¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªè¿­ä»£å™¨APIæ¥æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…é¡¹ï¼ˆè¯·æ³¨æ„ï¼Œæˆ‘ä»¬å·²ç»ç§»é™¤äº†é”šç‚¹å¹¶åˆ‡æ¢åˆ°æŸ¥æ‰¾ä»…åŒ…å«ASCIIå­—ç¬¦çš„æ•°å­—ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;[0-9]{4}-[0-9]{2}-[0-9]{2}&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> hay <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;What do 1865-04-14, 1881-07-02, 1901-09-06 and 1963-11-22 have in common?&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// &#39;m&#39; is a &#39;Match&#39;, and &#39;as_str()&#39; returns the matching part of the haystack.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> dates: Vec<span style=color:#f92672>&lt;&amp;</span><span style=color:#66d9ef>str</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> re.find_iter(hay).map(<span style=color:#f92672>|</span>m<span style=color:#f92672>|</span> m.as_str()).collect();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(dates, <span style=color:#a6e22e>vec!</span>[
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;1865-04-14&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;1881-07-02&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;1901-09-06&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;1963-11-22&#34;</span>,
</span></span><span style=display:flex><span>]);
</span></span></code></pre></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥éå†æ•è·å€¼ï¼ˆ<code>Captures</code>ï¼‰è€Œä¸æ˜¯åŒ¹é…å€¼ï¼ˆ<code>Match</code>ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡æ•è·ç»„è®¿é—®æ—¥æœŸçš„æ¯ä¸ªç»„ä»¶ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>(<span style=color:#f92672>?&lt;</span>name<span style=color:#f92672>&gt;</span>pattern)
</span></span><span style=display:flex><span> <span style=color:#960050;background-color:#1e0010>â”‚</span> <span style=color:#960050;background-color:#1e0010>â”‚</span>    <span style=color:#960050;background-color:#1e0010>â”‚</span>       <span style=color:#960050;background-color:#1e0010>â”‚</span>
</span></span><span style=display:flex><span> <span style=color:#960050;background-color:#1e0010>â”‚</span> <span style=color:#960050;background-color:#1e0010>â”‚</span>    <span style=color:#960050;background-color:#1e0010>â”‚</span>       <span style=color:#960050;background-color:#1e0010>â””â”€</span> <span style=color:#960050;background-color:#1e0010>æ•è·ç»„çš„æ¨¡å¼</span>
</span></span><span style=display:flex><span> <span style=color:#960050;background-color:#1e0010>â”‚</span> <span style=color:#960050;background-color:#1e0010>â”‚</span>    <span style=color:#960050;background-color:#1e0010>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span> <span style=color:#960050;background-color:#1e0010>æ•è·ç»„çš„åç§°</span>
</span></span><span style=display:flex><span> <span style=color:#960050;background-color:#1e0010>â”‚</span> <span style=color:#960050;background-color:#1e0010>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span> <span style=color:#960050;background-color:#1e0010>å‘½åè¯­æ³•çš„å¼€å§‹</span>
</span></span><span style=display:flex><span> <span style=color:#960050;background-color:#1e0010>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span> <span style=color:#960050;background-color:#1e0010>æ•è·ç»„çš„å¼€å§‹</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?&lt;y&gt;[0-9]{4})-(?&lt;m&gt;[0-9]{2})-(?&lt;d&gt;[0-9]{2})&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> hay <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;What do 1865-04-14, 1881-07-02, 1901-09-06 and 1963-11-22 have in common?&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// &#39;m&#39; is a &#39;Match&#39;, and &#39;as_str()&#39; returns the matching part of the haystack.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> dates: Vec<span style=color:#f92672>&lt;</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>str</span>, <span style=color:#f92672>&amp;</span><span style=color:#66d9ef>str</span>, <span style=color:#f92672>&amp;</span><span style=color:#66d9ef>str</span>)<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> re.captures_iter(hay).map(<span style=color:#f92672>|</span>caps<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// The unwraps are okay because every capture group must match if the whole
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// regex matches, and in this context, we know we have a match.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Note that we use `caps.name(&#34;y&#34;).unwrap().as_str()` instead of
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// `&amp;caps[&#34;y&#34;]` because the lifetime of the former is the same as the
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// lifetime of `hay` above, but the lifetime of the latter is tied to the
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// lifetime of `caps` due to how the `Index` trait is defined.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> year <span style=color:#f92672>=</span> caps.name(<span style=color:#e6db74>&#34;y&#34;</span>).unwrap().as_str();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> month <span style=color:#f92672>=</span> caps.name(<span style=color:#e6db74>&#34;m&#34;</span>).unwrap().as_str();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> day <span style=color:#f92672>=</span> caps.name(<span style=color:#e6db74>&#34;d&#34;</span>).unwrap().as_str();
</span></span><span style=display:flex><span>    (year, month, day)
</span></span><span style=display:flex><span>}).collect();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(dates, <span style=color:#a6e22e>vec!</span>[
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1865&#34;</span>, <span style=color:#e6db74>&#34;04&#34;</span>, <span style=color:#e6db74>&#34;14&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1881&#34;</span>, <span style=color:#e6db74>&#34;07&#34;</span>, <span style=color:#e6db74>&#34;02&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1901&#34;</span>, <span style=color:#e6db74>&#34;09&#34;</span>, <span style=color:#e6db74>&#34;06&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1963&#34;</span>, <span style=color:#e6db74>&#34;11&#34;</span>, <span style=color:#e6db74>&#34;22&#34;</span>),
</span></span><span style=display:flex><span>]);
</span></span></code></pre></div><h5 id=example-simpler-capture-group-extraction>Example: simpler capture group extraction</h5><hr><p>å¯ä»¥ä½¿ç”¨<code> Captures::extract</code> å°†å‰ä¸€ä¸ªç¤ºä¾‹ä¸­çš„ä»£ç ç®€åŒ–ä¸€äº›ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;([0-9]{4})-([0-9]{2})-([0-9]{2})&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> hay <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;What do 1865-04-14, 1881-07-02, 1901-09-06 and 1963-11-22 have in common?&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> dates: Vec<span style=color:#f92672>&lt;</span>(<span style=color:#f92672>&amp;</span><span style=color:#66d9ef>str</span>, <span style=color:#f92672>&amp;</span><span style=color:#66d9ef>str</span>, <span style=color:#f92672>&amp;</span><span style=color:#66d9ef>str</span>)<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> re.captures_iter(hay).map(<span style=color:#f92672>|</span>caps<span style=color:#f92672>|</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> (_, [year, month, day]) <span style=color:#f92672>=</span> caps.extract();
</span></span><span style=display:flex><span>    (year, month, day)
</span></span><span style=display:flex><span>}).collect();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(dates, <span style=color:#a6e22e>vec!</span>[
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1865&#34;</span>, <span style=color:#e6db74>&#34;04&#34;</span>, <span style=color:#e6db74>&#34;14&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1881&#34;</span>, <span style=color:#e6db74>&#34;07&#34;</span>, <span style=color:#e6db74>&#34;02&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1901&#34;</span>, <span style=color:#e6db74>&#34;09&#34;</span>, <span style=color:#e6db74>&#34;06&#34;</span>),
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#34;1963&#34;</span>, <span style=color:#e6db74>&#34;11&#34;</span>, <span style=color:#e6db74>&#34;22&#34;</span>),
</span></span><span style=display:flex><span>]);
</span></span></code></pre></div><p><code>Captures::extract</code> é€šè¿‡ç¡®ä¿åŒ¹é…çš„ç»„æ•°ä¸é€šè¿‡ <code>[year, month, day] </code>è¯­æ³•è¯·æ±‚çš„ç»„æ•°åŒ¹é…æ¥å·¥ä½œã€‚å¦‚æœå®ƒä»¬åŒ¹é…ï¼Œé‚£ä¹ˆæ¯ä¸ªå¯¹åº”æ•è·ç»„çš„å­å­—ç¬¦ä¸²å°†è‡ªåŠ¨ä»¥é€‚å½“å¤§å°çš„æ•°ç»„è¿”å›ã€‚Rust çš„æ•°ç»„æ¨¡å¼åŒ¹é…è¯­æ³•è´Ÿè´£å…¶ä½™éƒ¨åˆ†ã€‚</p><h5 id=replacement-with-named-capture-groups>replacement with named capture groups</h5><hr><p>åœ¨ä¹‹å‰çš„ä¾‹å­åŸºç¡€ä¸Šï¼Œä¹Ÿè®¸æˆ‘ä»¬æƒ³é‡æ–°æ’åˆ—æ—¥æœŸæ ¼å¼ã€‚å¯ä»¥é€šè¿‡æ‰¾åˆ°æ¯ä¸ªåŒ¹é…é¡¹å¹¶ç”¨ä¸åŒçš„å†…å®¹æ›¿æ¢å®ƒæ¥å®ç°ã€‚<code>Regex::replace_all</code> è¿™ä¸ªå‡½æ•°æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼ŒåŒ…æ‹¬æ”¯æŒåœ¨æ›¿æ¢å­—ç¬¦ä¸²ä¸­å¼•ç”¨å‘½åç»„ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?&lt;y&gt;\d{4})-(?&lt;m&gt;\d{2})-(?&lt;d&gt;\d{2})&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> before <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1973-01-05, 1975-08-25 and 1980-10-18&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> after <span style=color:#f92672>=</span> re.replace_all(before, <span style=color:#e6db74>&#34;$m/$d/$y&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(after, <span style=color:#e6db74>&#34;01/05/1973, 08/25/1975 and 10/18/1980&#34;</span>);
</span></span></code></pre></div><p>æ›¿æ¢æ–¹æ³•å®é™…ä¸Šåœ¨æ›¿æ¢ä¸­æ˜¯å¤šæ€çš„ï¼Œè¿™æä¾›äº†æ¯”è¿™é‡Œçœ‹åˆ°çš„æ›´å¤šçš„çµæ´»æ€§ã€‚ï¼ˆæœ‰å…³ <code>Regex::replace</code> çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£ã€‚ï¼‰</p><h5 id=example-verbose-mode>Example: verbose mode</h5><hr><p>å½“ä½ çš„æ­£åˆ™è¡¨è¾¾å¼å˜å¾—å¤æ‚æ—¶ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨å…¶ä»–å·¥å…·ï¼Œè€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åšæŒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>x</code> æ ‡å¿—å¯ç”¨ä¸æ˜¾ç€çš„ç©ºç™½æ¨¡å¼æˆ–â€œè¯¦ç»†æ¨¡å¼â€ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç©ºç™½è¢«è§†ä¸ºä¸æ˜¾ç€ï¼Œå¯ä»¥ç¼–å†™æ³¨é‡Šã€‚è¿™å¯èƒ½ä¼šä½¿ä½ çš„æ¨¡å¼æ›´æ˜“äºç†è§£ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?x)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  (?P&lt;y&gt;\d{4}) # the year, including all Unicode digits
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  (?P&lt;m&gt;\d{2}) # the month, including all Unicode digits
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  (?P&lt;d&gt;\d{2}) # the day, including all Unicode digits
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span>).unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> before <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1973-01-05, 1975-08-25 and 1980-10-18&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> after <span style=color:#f92672>=</span> re.replace_all(before, <span style=color:#e6db74>&#34;$m/$d/$y&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(after, <span style=color:#e6db74>&#34;01/05/1973, 08/25/1975 and 10/18/1980&#34;</span>);
</span></span></code></pre></div><p>å¦‚æœä½ å¸Œæœ›åœ¨è¿™ç§æ¨¡å¼ä¸‹åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨ <code>\s</code>, <code>\n</code>, <code>\t</code> ç­‰ã€‚è¦è½¬ä¹‰å•ä¸ªç©ºæ ¼å­—ç¬¦ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>\</code>ï¼Œä½¿ç”¨å…¶åå…­è¿›åˆ¶å­—ç¬¦ä»£ç  <code>\x20</code> æˆ–æš‚æ—¶ç¦ç”¨<code> x</code> æ ‡å¿—ï¼Œä¾‹å¦‚ï¼Œ<code>(?-x: )</code>ã€‚</p><h5 id=example-match-multiple-regular-expressions-simultaneously>Example: match multiple regular expressions simultaneously</h5><p>è¿™å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>RegexSet</code> åœ¨ä¸€æ¬¡æ‰«æä¸­åŒ¹é…å¤šä¸ªï¼ˆå¯èƒ½é‡å çš„ï¼‰æ­£åˆ™è¡¨è¾¾å¼ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::RegexSet;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> set <span style=color:#f92672>=</span> RegexSet::new(<span style=color:#f92672>&amp;</span>[
</span></span><span style=display:flex><span>    <span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;\w+&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;\d+&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;\pL+&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;foo&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;bar&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;barfoo&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;foobar&#34;</span>,
</span></span><span style=display:flex><span>]).unwrap();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Iterate over and collect all of the matches. Each match corresponds to the
</span></span></span><span style=display:flex><span><span style=color:#75715e>// ID of the matching pattern.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> matches: Vec<span style=color:#f92672>&lt;</span>_<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> set.matches(<span style=color:#e6db74>&#34;foobar&#34;</span>).into_iter().collect();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(matches, <span style=color:#a6e22e>vec!</span>[<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>6</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// You can also test whether a particular regex matched:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> matches <span style=color:#f92672>=</span> set.matches(<span style=color:#e6db74>&#34;foobar&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert!</span>(<span style=color:#f92672>!</span>matches.matched(<span style=color:#ae81ff>5</span>));
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert!</span>(matches.matched(<span style=color:#ae81ff>6</span>));
</span></span></code></pre></div><h4 id=performance>Performance</h4><hr><p>æœ¬èŠ‚ç®€è¦è®¨è®ºäº†æ­£åˆ™è¡¨è¾¾å¼åœ¨é€Ÿåº¦å’Œèµ„æºä½¿ç”¨æ–¹é¢çš„å‡ ä¸ªé—®é¢˜ã€‚</p><h5 id=only-ask-for-what-you-need>Only ask for what you need</h5><hr><p>åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢æ—¶ï¼Œé€šå¸¸å¯ä»¥è¯·æ±‚ä¸‰ç§ä¸åŒç±»å‹çš„ä¿¡æ¯ï¼š</p><ol><li>æ­£åˆ™è¡¨è¾¾å¼åœ¨haystackä¸­åŒ¹é…å—ï¼Ÿ</li><li>æ­£åˆ™è¡¨è¾¾å¼åœ¨haystackåŒ¹é…çš„ä½ç½®ï¼Ÿ</li><li>æ¯ä¸ªæ•è·ç»„åœ¨haystackä¸­åŒ¹é…çš„ä½ç½®åœ¨å“ªé‡Œï¼Ÿ</li></ol><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªåº“å¯ä»¥æä¾›ä¸€ä¸ªå‡½æ•°æ¥å›ç­”#3ï¼Œè¿™ä¼šè‡ªåŠ¨åŒ…å«#1å’Œ#2ã€‚ç„¶è€Œï¼Œè®¡ç®—æ•è·ç»„åŒ¹é…ä½ç½®å¯èƒ½ä¼šæ˜¾è‘—æ›´æ˜‚è´µï¼Œæ‰€ä»¥å¦‚æœä½ ä¸éœ€è¦çš„è¯æœ€å¥½ä¸è¦è¿™æ ·åšã€‚</p><p>å› æ­¤ï¼Œåªéœ€è¦è¯·æ±‚ä½ éœ€è¦çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åªéœ€è¦æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸è¦ä½¿ç”¨<code>Regex::find</code>ã€‚è€Œæ˜¯ä½¿ç”¨<code>Regex::is_match</code>ã€‚</p><h5 id=unicode-can-impact-usage-and-search-speed>Unicode can impact usage and search speed</h5><hr><p>è¿™ä¸ªcrateå¯¹Unicodeæœ‰ä¸€çº§æ”¯æŒå¹¶é»˜è®¤å¯ç”¨ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œä¸ºäº†æ”¯æŒå®ƒæ‰€éœ€çš„é¢å¤–å†…å­˜å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå¹¶ä¸”é€šå¸¸ä¸ä¼šå½±å“æœç´¢é€Ÿåº¦ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒå¯èƒ½ä¼šæœ‰å½±å“ã€‚</p><p>åœ¨å†…å­˜ä½¿ç”¨æ–¹é¢ï¼ŒUnicodeçš„ä¸»è¦å½±å“ä¸»è¦é€šè¿‡Unicodeå­—ç¬¦ç±»ä½“ç°ã€‚Unicodeå­—ç¬¦ç±»é€šå¸¸ç›¸å½“å¤§ã€‚ä¾‹å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ\wåŒ¹é…å¤§çº¦14ä¸‡ä¸ªä¸åŒçš„ä»£ç ç‚¹ã€‚è¿™éœ€è¦é¢å¤–çš„å†…å­˜ï¼Œå¹¶ä¸”é€šå¸¸ä¼šå‡æ…¢æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘çš„é€Ÿåº¦ã€‚è™½ç„¶è¿™é‡Œå¶å°”ä½¿ç”¨ä¸€ä¸ª\wé€šå¸¸ä¸ä¼šè¢«æ³¨æ„åˆ°ï¼Œä½†å†™\w{100}ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªç›¸å½“å¤§çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚å®é™…ä¸Šï¼Œ\wæ¯”å…¶ä»…é™ASCIIçš„ç‰ˆæœ¬å¤§å¾—å¤šï¼Œå› æ­¤å¦‚æœæ‚¨çš„éœ€æ±‚ä»…é™äºASCIIï¼Œé‚£ä¹ˆä½¿ç”¨ASCIIç±»å¯èƒ½æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚ä»…é™ASCIIçš„\wå¯ä»¥ä»¥å¤šç§æ–¹å¼æ‹¼å†™ã€‚ä»¥ä¸‹æ‰€æœ‰å†…å®¹éƒ½æ˜¯ç­‰ä»·çš„ï¼š</p><ul><li><code>[0-9A-Za-z_]</code></li><li><code>(?-u:\w)</code></li><li><code>[[:word:]]</code></li><li><code>[\w&&\p{ascii}]</code></li></ul><p>åœ¨æœç´¢é€Ÿåº¦æ–¹é¢ï¼ŒUnicodeé€šå¸¸èƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†ï¼Œå³ä½¿åœ¨ä½¿ç”¨å¤§å‹Unicodeå­—ç¬¦ç±»æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ç„¶è€Œï¼Œä¸€äº›æ›´å¿«çš„å†…éƒ¨æ­£åˆ™è¡¨è¾¾å¼å¼•æ“æ— æ³•å¤„ç†Unicodeæ„ŸçŸ¥çš„å•è¯è¾¹ç•Œæ–­è¨€ã€‚å› æ­¤ï¼Œå¦‚æœä½ ä¸éœ€è¦Unicodeæ„ŸçŸ¥çš„å•è¯è¾¹ç•Œæ–­è¨€ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨(?-u:\b)ä»£æ›¿\bï¼Œå…¶ä¸­å‰è€…ä½¿ç”¨ASCII-onlyçš„å•è¯å­—ç¬¦å®šä¹‰ã€‚</p><h5 id=literals-might-accelerate-searches>Literals might accelerate searches</h5><hr><p>è¿™ä¸ªcrateåœ¨è¯†åˆ«æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­çš„å­—é¢é‡å¹¶ä½¿ç”¨å®ƒä»¬åŠ é€Ÿæœç´¢æ–¹é¢é€šå¸¸è¡¨ç°è‰¯å¥½ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œåœ¨ä½ çš„æ¨¡å¼ä¸­åŒ…å«æŸç§å­—é¢é‡å¯èƒ½ä¼šä½¿æœç´¢æ˜¾è‘—åŠ å¿«ã€‚ä¾‹å¦‚ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ \w+@\w+ ä¸­ï¼Œå¼•æ“ä¼šæŸ¥æ‰¾ @ çš„å‡ºç°ï¼Œç„¶åå°è¯•åå‘åŒ¹é… \w+ æ¥æ‰¾åˆ°èµ·å§‹ä½ç½®ã€‚</p><h5 id=avoid-re-compiling-regexes-especially-in-a-loop>Avoid re-compiling regexes, especially in a loop</h5><hr><p>åœ¨å¾ªç¯ä¸­ç¼–è¯‘ç›¸åŒçš„æ¨¡å¼æ˜¯ä¸€ç§åæ¨¡å¼ï¼Œå› ä¸ºæ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘é€šå¸¸å¾ˆæ˜‚è´µã€‚ï¼ˆç¼–è¯‘æ—¶é—´å–å†³äºæ¨¡å¼çš„å¤§å°ï¼Œå¯èƒ½ä»å‡ å¾®ç§’åˆ°å‡ æ¯«ç§’ä¸ç­‰ã€‚ï¼‰ä¸ä»…ç¼–è¯‘æœ¬èº«æ˜‚è´µï¼Œè€Œä¸”è¿™è¿˜ä¼šé˜»æ­¢æ­£åˆ™è¡¨è¾¾å¼å¼•æ“å†…éƒ¨é‡ç”¨åˆ†é…çš„ä¼˜åŒ–ã€‚</p><p>åœ¨ Rust ä¸­ï¼Œå¦‚æœæ­£åˆ™è¡¨è¾¾å¼åœ¨è¾…åŠ©å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œä¼ é€’å®ƒä»¬å¯èƒ½ä¼šæœ‰äº›éº»çƒ¦ã€‚ç›¸åï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ <code>std::sync::LazyLock</code> æˆ– <code>once_cell</code> crateï¼Œå¦‚æœä½ ä¸èƒ½ä½¿ç”¨æ ‡å‡†åº“ã€‚</p><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>std::sync::LazyLock</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> std::sync::LazyLock;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>some_helper_function</span>(haystack: <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>str</span>) -&gt; <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>RE</span>: <span style=color:#a6e22e>LazyLock</span><span style=color:#f92672>&lt;</span>Regex<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> LazyLock::new(<span style=color:#f92672>||</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;...&#34;</span>).unwrap());
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>RE</span>.is_match(haystack)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert!</span>(some_helper_function(<span style=color:#e6db74>&#34;abc&#34;</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>assert!</span>(<span style=color:#f92672>!</span>some_helper_function(<span style=color:#e6db74>&#34;ac&#34;</span>));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å…·ä½“æ¥è¯´ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¿›è¡Œç¼–è¯‘ã€‚åœ¨åç»­ä½¿ç”¨ä¸­ï¼Œå®ƒä¼šé‡ç”¨ä¹‹å‰æ„å»ºçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ³¨æ„å¦‚ä½•å°†æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰ä¸ºç‰¹å®šå‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚</p><h5 id=sharing-a-regex-across-threads-can-resule-in-contention>Sharing a regex across threads can resule in contention</h5><hr><p>è™½ç„¶å•ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒæ—¶ä»å¤šä¸ªçº¿ç¨‹è‡ªç”±ä½¿ç”¨ï¼Œä½†å¿…é¡»æ”¯ä»˜ä¸€å®šçš„åŒæ­¥æˆæœ¬ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé™¤éæ¯ä¸ªçº¿ç¨‹çš„ä¸»è¦ä»»åŠ¡æ˜¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢ï¼Œå¹¶ä¸”å¤§å¤šæ•°æœç´¢éƒ½åœ¨è¾ƒçŸ­çš„å­—ç¬¦ä¸²ä¸­è¿›è¡Œï¼Œå¦åˆ™ä¸ä¼šè§‚å¯Ÿåˆ°è¿™ç§æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…±äº«èµ„æºçš„å†…éƒ¨ç«äº‰å¯èƒ½ä¼šæ¿€å¢ï¼Œå¢åŠ å»¶è¿Ÿï¼Œä»è€Œå¯èƒ½å‡æ…¢æ¯ä¸ªå•ç‹¬çš„æœç´¢ã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨å‘é€åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ä¹‹å‰å…‹éš†æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…‹éš†çš„æ­£åˆ™è¡¨è¾¾å¼ä»ç„¶ä¼šå…±äº«å…¶ç¼–è¯‘çŠ¶æ€çš„ç›¸åŒå†…éƒ¨åªè¯»éƒ¨åˆ†ï¼ˆå®ƒæ˜¯å¼•ç”¨è®¡æ•°çš„ï¼‰ï¼Œä½†æ¯ä¸ªçº¿ç¨‹å°†è·å¾—å¯¹è¿è¡Œæœç´¢æ—¶ä½¿ç”¨çš„å¯å˜ç©ºé—´çš„ä¼˜åŒ–è®¿é—®ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™æ ·åšä¸ä¼šå¢åŠ é¢å¤–çš„å†…å­˜æˆæœ¬ã€‚å”¯ä¸€çš„æˆæœ¬æ˜¯éœ€è¦æ˜¾å¼å…‹éš†æ­£åˆ™è¡¨è¾¾å¼æ‰€å¢åŠ çš„ä»£ç å¤æ‚æ€§ã€‚ï¼ˆå¦‚æœä½ åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¯ä¸ªçº¿ç¨‹ä»ç„¶ä¼šè·å¾—è‡ªå·±çš„å¯å˜ç©ºé—´ï¼Œä½†è®¿é—®è¯¥ç©ºé—´ä¼šæ›´æ…¢ã€‚ï¼‰</p><h4 id=unicode>Unicode</h4><hr><p>æœ¬èŠ‚è®¨è®ºäº†è¯¥æ­£åˆ™è¡¨è¾¾å¼åº“å¯¹Unicodeçš„æ”¯æŒæƒ…å†µã€‚åœ¨å±•ç¤ºä¸€äº›ç¤ºä¾‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€»ç»“ä¸€ä¸‹ç›¸å…³è¦ç‚¹ï¼š</p><ul><li>è¿™ä¸ª crate å‡ ä¹å®Œå…¨å®ç°äº† Unicode æŠ€æœ¯æ ‡å‡† #18 ä¸­è§„å®šçš„â€œåŸºæœ¬ Unicode æ”¯æŒâ€ï¼ˆçº§åˆ« 1ï¼‰ã€‚æ”¯æŒçš„è¯¦ç»†ä¿¡æ¯åœ¨ regex crate ä»“åº“çš„æ ¹ç›®å½•ä¸‹çš„ UNICODE.md æ–‡ä»¶ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚å‡ ä¹ä¸æ”¯æŒ Unicode æŠ€æœ¯æ ‡å‡† #18 ä¸­è§„å®šçš„â€œæ‰©å±• Unicode æ”¯æŒâ€ï¼ˆçº§åˆ« 2ï¼‰ã€‚</li><li>é¡¶çº§æ­£åˆ™è¡¨è¾¾å¼åƒè¿­ä»£éå†haystackä¸­çš„æ¯ä¸ªä»£ç ç‚¹ä¸€æ ·è¿è¡Œæœç´¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒ¹é…çš„åŸºæœ¬åŸå­æ˜¯ä¸€ä¸ªå•ä¸€çš„ä»£ç ç‚¹ã€‚</li><li><code>bytes::Regex</code> åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½å…è®¸ç¦ç”¨ Unicode æ¨¡å¼ï¼Œå¯¹æ•´ä¸ªæ¨¡å¼æˆ–éƒ¨åˆ†æ¨¡å¼è¿›è¡Œç¦ç”¨ã€‚å½“ Unicode æ¨¡å¼è¢«ç¦ç”¨æ—¶ï¼Œæœç´¢ä¼šåƒéå† haystack ä¸­çš„æ¯ä¸ªå­—èŠ‚ä¸€æ ·è¿›è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒ¹é…çš„åŸºæœ¬å•å…ƒæ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚ï¼ˆé¡¶çº§ Regex ä¹Ÿå…è®¸ç¦ç”¨ Unicodeï¼Œä»è€Œåƒé€å­—èŠ‚åŒ¹é…ä¸€æ ·è¿›è¡ŒåŒ¹é…ï¼Œä½†ä»…åœ¨è¿™æ ·åšä¸ä¼šå…è®¸åŒ¹é…æ— æ•ˆçš„ UTF-8 æ—¶ã€‚ï¼‰</li><li>å½“Unicodeæ¨¡å¼å¯ç”¨ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰æ—¶ï¼Œ<code>.</code>å°†åŒ¹é…ä¸€ä¸ªå®Œæ•´çš„Unicodeæ ‡é‡å€¼ï¼Œå³ä½¿å®ƒä½¿ç”¨å¤šä¸ªå­—èŠ‚è¿›è¡Œç¼–ç ã€‚å½“Unicodeæ¨¡å¼ç¦ç”¨ï¼ˆä¾‹å¦‚ï¼Œ(?-u:.ï¼‰ï¼‰æ—¶ï¼Œ<code>.</code>å°†å§‹ç»ˆåŒ¹é…ä¸€ä¸ªå­—èŠ‚ã€‚</li><li>å­—ç¬¦ç±» <code>\w</code>, <code>\d</code> å’Œ <code>\s</code> é»˜è®¤æ˜¯ Unicode æ„ŸçŸ¥çš„ã€‚ä½¿ç”¨<code> (?-u:\w)</code>, <code>(?-u:\d) </code>å’Œ <code>(?-u:\s)</code> å¯ä»¥è·å–å®ƒä»¬çš„ ASCII ä»…å®šä¹‰ã€‚</li><li>åŒæ ·ï¼Œ<code>\b</code> å’Œ <code>\B</code> ä½¿ç”¨ Unicode å®šä¹‰çš„â€œå•è¯â€å­—ç¬¦ã€‚è¦è·å–ä»…é™ ASCII çš„å•è¯è¾¹ç•Œï¼Œå¯ä»¥ä½¿ç”¨ <code>(?-u:\b)</code> å’Œ <code>(?-u:\B)</code>ã€‚è¿™ä¹Ÿé€‚ç”¨äºç‰¹æ®Šçš„å•è¯è¾¹ç•Œæ–­è¨€ã€‚ï¼ˆå³ <code>\b{start}</code>ï¼Œ<code>\b{end}</code>ï¼Œ<code>\b{start-half}</code>ï¼Œ<code>\b{end-half}</code>ã€‚ï¼‰</li><li>åœ¨å¤šè¡Œæ¨¡å¼ä¸‹ï¼Œ<code>^ </code>å’Œ<code> $</code> ä¸æ˜¯ Unicode æ„ŸçŸ¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬åªè¯†åˆ«<code> \n</code>ï¼ˆå‡è®¾æœªå¯ç”¨ CRLF æ¨¡å¼ï¼‰ï¼Œè€Œä¸è¯†åˆ« Unicode å®šä¹‰çš„å…¶ä»–ä»»ä½•è¡Œç»ˆæ­¢ç¬¦ã€‚</li><li>ä¸åŒºåˆ†å¤§å°å†™çš„æœç´¢æ˜¯Unicodeæ„ŸçŸ¥çš„ï¼Œå¹¶ä½¿ç”¨ç®€å•çš„å¤§å°å†™æŠ˜å ã€‚</li><li>Unicodeé€šç”¨ç±»åˆ«ã€è„šæœ¬å’Œè®¸å¤šå¸ƒå°”å±æ€§å¯ä»¥é€šè¿‡é»˜è®¤çš„\p{å±æ€§åç§°}è¯­æ³•è®¿é—®ã€‚</li><li>åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼ŒåŒ¹é…éƒ½æ˜¯ä½¿ç”¨å­—èŠ‚åç§»é‡æŠ¥å‘Šçš„ã€‚æ›´ç²¾ç¡®åœ°è¯´ï¼Œæ˜¯ä½¿ç”¨UTF-8ä»£ç å•å…ƒåç§»é‡ã€‚è¿™å…è®¸å¯¹haystackè¿›è¡Œå¸¸æ•°æ—¶é—´çš„ç´¢å¼•å’Œåˆ‡ç‰‡ã€‚</li></ul><p>æ¨¡å¼æœ¬èº«ä»…è¢«è§£é‡Šä¸ºUnicodeæ ‡é‡å€¼çš„åºåˆ—ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä½ çš„æ¨¡å¼ä¸­ç›´æ¥ä½¿ç”¨Unicodeå­—ç¬¦ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?i)Î”+&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> m <span style=color:#f92672>=</span> re.find(<span style=color:#e6db74>&#34;Î”Î´Î”&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>((<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>6</span>), (m.start(), m.end()));
</span></span><span style=display:flex><span><span style=color:#75715e>// alternatively:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>assert_eq!</span>(<span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>6</span>, m.range());
</span></span></code></pre></div><p>å¦‚ä¸Šæ‰€è¿°ï¼ŒUnicodeé€šç”¨ç±»åˆ«ã€è„šæœ¬ã€è„šæœ¬æ‰©å±•ã€ç‰ˆæœ¬ä»¥åŠä¸€äº›å¸ƒå°”å±æ€§éƒ½å¯ä»¥ä½œä¸ºå­—ç¬¦ç±»ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åŒ¹é…ä¸€ä¸²æ•°å­—ã€å¸Œè…Šå­—æ¯æˆ– Cherokee å­—æ¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;[\pN\p{Greek}\p{Cherokee}]+&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> m <span style=color:#f92672>=</span> re.find(<span style=color:#e6db74>&#34;abcÎ”á Î²â… á´Î³Î´â…¡xyz&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(<span style=color:#ae81ff>3</span><span style=color:#f92672>..</span><span style=color:#ae81ff>23</span>, m.range());
</span></span></code></pre></div><h5 id=opt-out-of-unicode-support>Opt out of Unicode support</h5><hr><p><code>bytes::Regex</code>ç±»å‹å¯ä»¥æœç´¢<code>&[u8]</code>haystackã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œhaystacks é€šå¸¸åƒä¸» <code>Regex</code> ç±»å‹ä¸€æ ·è¢«å½“ä½œ UTF-8 å¤„ç†ã€‚ç„¶è€Œï¼Œå¯ä»¥é€šè¿‡å…³é—­<code>u</code>æ ‡å¿—æ¥ç¦ç”¨æ­¤è¡Œä¸ºï¼Œå³ä½¿è¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´åŒ¹é…æ— æ•ˆçš„UTF-8ã€‚ä¾‹å¦‚ï¼Œå½“å…³é—­<code>u</code>æ ‡å¿—æ—¶ï¼Œ<code>.</code>å°†åŒ¹é…ä»»ä½•å­—èŠ‚è€Œä¸æ˜¯ä»»ä½•Unicodeæ ‡é‡å€¼ã€‚</p><p>ç¦ç”¨ <code>u</code> æ ‡å¿—ä¹Ÿå¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ <code>&amp;str</code> åŸºäºçš„ Regex ç±»å‹ï¼Œä½†ä»…åœ¨ç»´æŠ¤ UTF-8 ä¸å˜æ€§çš„æƒ…å†µä¸‹å…è®¸ã€‚ä¾‹å¦‚ï¼Œ<code>(?-u:\w)</code> æ˜¯ä¸€ä¸ªä»…åŒ…å« ASCII å­—ç¬¦çš„ \w å­—ç¬¦ç±»ï¼Œå¹¶ä¸”åœ¨ <code>&amp;str</code> åŸºäºçš„ Regex ä¸­æ˜¯åˆæ³•çš„ï¼Œä½† <code>(?-u:\W)</code>å°†å°è¯•åŒ¹é…ä¸åœ¨<code>(?-u:\w)</code>ä¸­çš„ä»»ä½•å­—èŠ‚ï¼Œè¿™åè¿‡æ¥åŒ…æ‹¬æ— æ•ˆçš„ UTF-8 å­—èŠ‚ã€‚åŒæ ·ï¼Œ<code>(?-u:\xFF)</code>å°†å°è¯•åŒ¹é…åŸå§‹å­—èŠ‚ <code>\xFF</code>ï¼ˆè€Œä¸æ˜¯ U+00FFï¼‰ï¼Œè¿™æ˜¯æ— æ•ˆçš„ UTF-8ï¼Œå› æ­¤åœ¨ <code>&amp;str</code> åŸºäºçš„æ­£åˆ™è¡¨è¾¾å¼ä¸­æ˜¯éæ³•çš„ã€‚</p><p>æœ€åï¼Œç”±äºUnicodeæ”¯æŒéœ€è¦æ‰“åŒ…å¤§å‹Unicodeæ•°æ®è¡¨ï¼Œè¯¥crateæä¾›äº†æ§åˆ¶å°å¼€å…³æ¥ç¦ç”¨è¿™äº›æ•°æ®è¡¨çš„ç¼–è¯‘ï¼Œè¿™åœ¨ç¼©å°äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°å’Œå‡å°‘ç¼–è¯‘æ—¶é—´æ–¹é¢å¯èƒ½å¾ˆæœ‰ç”¨ã€‚æœ‰å…³å¦‚ä½•å®ç°è¿™ä¸€ç‚¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…crateåŠŸèƒ½éƒ¨åˆ†ã€‚</p><h4 id=syntax>Syntax</h4><hr><p>æœ¬åº“æ”¯æŒçš„è¯­æ³•å¦‚ä¸‹ã€‚</p><p>æ³¨æ„ï¼Œæ­£åˆ™è¡¨è¾¾å¼è§£æå™¨å’ŒæŠ½è±¡è¯­æ³•åœ¨å•ç‹¬çš„ crate <code>regex-syntax</code> ä¸­æš´éœ²ã€‚</p><h5 id=matching-one-character>Matching one character</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tcl data-lang=tcl><span style=display:flex><span>.             é™¤äº†æ¢è¡Œç¬¦<span style=color:#960050;background-color:#1e0010>ï¼ˆ</span>åŒ…æ‹¬å¸¦æœ‰ s æ ‡å¿—çš„æ¢è¡Œç¬¦<span style=color:#960050;background-color:#1e0010>ï¼‰</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>[</span>0-9<span style=color:#66d9ef>]</span>         ä»»ä½• ASCII æ•°å­—
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>d            æ•°å­— <span style=color:#66d9ef>(</span><span style=color:#960050;background-color:#1e0010>\</span>p<span style=color:#66d9ef>{</span>Nd<span style=color:#66d9ef>})</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>D            éæ•°å­—
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>pX           ç”±ä¸€ä¸ªå­—æ¯åç§°æ ‡è¯†çš„Unicodeå­—ç¬¦ç±»
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>p<span style=color:#66d9ef>{</span>Greek<span style=color:#66d9ef>}</span>     Unicodeå­—ç¬¦ç±»<span style=color:#960050;background-color:#1e0010>ï¼ˆ</span>é€šç”¨ç±»åˆ«æˆ–è„šæœ¬<span style=color:#960050;background-color:#1e0010>ï¼‰</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>PX           ç”±ä¸€ä¸ªå­—æ¯åç§°æ ‡è¯†çš„å¦å®šUnicodeå­—ç¬¦ç±»
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>P<span style=color:#66d9ef>{</span>Greek<span style=color:#66d9ef>}</span>     å¦å®šçš„Unicodeå­—ç¬¦ç±»<span style=color:#960050;background-color:#1e0010>ï¼ˆ</span>é€šç”¨ç±»åˆ«æˆ–è„šæœ¬<span style=color:#960050;background-color:#1e0010>ï¼‰</span>
</span></span></code></pre></div><h5 id=character-classes>Character classes</h5><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>[xyz]         A character class matching either x, y or z (<span style=color:#66d9ef>union</span>).
</span></span><span style=display:flex><span>[<span style=color:#f92672>^</span>xyz]        A character class matching any character except x, y and z.
</span></span><span style=display:flex><span>[a<span style=color:#f92672>-</span>z]         A character class matching any character <span style=color:#66d9ef>in</span> range a<span style=color:#f92672>-</span>z.
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>alpha</span>:]]   <span style=color:#66d9ef>ASCII</span> character class ([A<span style=color:#f92672>-</span>Za<span style=color:#f92672>-</span>z])
</span></span><span style=display:flex><span>[[:<span style=color:#f92672>^</span>alpha:]]  Negated <span style=color:#66d9ef>ASCII</span> character class ([<span style=color:#f92672>^</span>A<span style=color:#f92672>-</span>Za<span style=color:#f92672>-</span>z])
</span></span><span style=display:flex><span>[x[<span style=color:#f92672>^</span>xyz]]     Nested<span style=color:#f92672>/</span>grouping character class (matching any character except y and z)
</span></span><span style=display:flex><span>[a<span style=color:#f92672>-</span>y<span style=color:#f92672>&amp;&amp;</span>xyz]    Intersection (matching x or y)
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span><span style=color:#f92672>&amp;&amp;</span>[<span style=color:#f92672>^</span><span style=color:#ae81ff>4</span>]]   Subtraction using intersection and negation (matching <span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span> except <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>[<span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span><span style=color:#f92672>--</span><span style=color:#ae81ff>4</span>]      Direct subtraction (matching <span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span> except <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>[a<span style=color:#f92672>-</span>g<span style=color:#f92672>~~</span>b<span style=color:#f92672>-</span>h]    Symmetric difference (matching <span style=color:#960050;background-color:#1e0010>`</span>a<span style=color:#960050;background-color:#1e0010>`</span> and <span style=color:#960050;background-color:#1e0010>`</span>h<span style=color:#960050;background-color:#1e0010>`</span> only)
</span></span><span style=display:flex><span>[<span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#960050;background-color:#1e0010>\</span>]]        Escaping <span style=color:#66d9ef>in</span> character classes (matching [ or ])
</span></span><span style=display:flex><span>[a<span style=color:#f92672>&amp;&amp;</span>b]        An empty character class matching nothing
</span></span></code></pre></div><p>ä»»ä½•å‘½åå­—ç¬¦ç±»éƒ½å¯ä»¥å‡ºç°åœ¨æ–¹æ‹¬å·<code> [... ]</code> å­—ç¬¦ç±»ä¸­ã€‚ä¾‹å¦‚ï¼Œ<code>[\p{Greek}[:digit:]]</code> åŒ¹é…ä»»ä½• ASCII æ•°å­—æˆ–å¸Œè…Šå­—æ¯è¡¨ä¸­çš„ä»»ä½•ä»£ç ç‚¹ã€‚<code>[\p{Greek}&&\pL]</code> åŒ¹é…å¸Œè…Šå­—æ¯ã€‚</p><p>å­—ç¬¦ç±»ä¸­çš„ä¼˜å…ˆçº§ï¼Œä»æœ€ç»‘å®šåˆ°æœ€ä¸ç»‘å®šï¼š</p><ol><li><p>èŒƒå›´ï¼š<code>[a-cd]</code> == <code>[[a-c]d]</code></p></li><li><p>å¹¶é›†ï¼š<code>[ab&&amp;bc]</code> == <code>[[ab]&&[bc]]</code></p></li><li><p>äº¤é›†ã€å·®é›†ã€å¯¹ç§°å·®é›†ã€‚è¿™ä¸‰ç§è¿ç®—ç¬¦å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œå¹¶æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºè¿›è¡Œè®¡ç®—ã€‚ä¾‹å¦‚ï¼Œ<code>[\pL--\p{Greek}&&\p{Uppercase}]</code> == <code>[[\pL--\p{Greek}]&&\p{Uppercase}]</code>ã€‚</p></li><li><p>å¦å®šï¼š<code>[^a-z&&amp;b]</code> == <code>[^[a-z&&amp;b]]</code></p></li></ol><h5 id=composites>Composites</h5><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>xy    concatenation (x followed by y)
</span></span><span style=display:flex><span>x<span style=color:#f92672>|</span>y   alternation (x or y, prefer x)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> haystack <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;samwise&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// If &#39;samwise&#39; comes first in our alternation, then it is
</span></span></span><span style=display:flex><span><span style=color:#75715e>// preferred as a match, even if the regex engine could
</span></span></span><span style=display:flex><span><span style=color:#75715e>// technically detect that &#39;sam&#39; led to a match earlier.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;samwise|sam&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(<span style=color:#e6db74>&#34;samwise&#34;</span>, re.find(haystack).unwrap().as_str());
</span></span><span style=display:flex><span><span style=color:#75715e>// But if &#39;sam&#39; comes first, then it will match instead.
</span></span></span><span style=display:flex><span><span style=color:#75715e>// In this case, it is impossible for &#39;samwise&#39; to match
</span></span></span><span style=display:flex><span><span style=color:#75715e>// because &#39;sam&#39; is a prefix of it.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;sam|samwise&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(<span style=color:#e6db74>&#34;sam&#34;</span>, re.find(haystack).unwrap().as_str());
</span></span></code></pre></div><h5 id=repetitions>Repetitions</h5><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>x<span style=color:#f92672>*</span>        zero or more of x (greedy)
</span></span><span style=display:flex><span>x<span style=color:#f92672>+</span>        one or more of x (greedy)
</span></span><span style=display:flex><span>x<span style=color:#f92672>?</span>        zero or one of x (greedy)
</span></span><span style=display:flex><span>x<span style=color:#f92672>*?</span>       zero or more of x (ungreedy<span style=color:#f92672>/</span>lazy)
</span></span><span style=display:flex><span>x<span style=color:#f92672>+?</span>       one or more of x (ungreedy<span style=color:#f92672>/</span>lazy)
</span></span><span style=display:flex><span>x<span style=color:#f92672>??</span>       zero or one of x (ungreedy<span style=color:#f92672>/</span>lazy)
</span></span><span style=display:flex><span>x{n,m}    at least n x and at most m x (greedy)
</span></span><span style=display:flex><span>x{n,}     at least n x (greedy)
</span></span><span style=display:flex><span>x{n}      exactly n x
</span></span><span style=display:flex><span>x{n,m}<span style=color:#f92672>?</span>   at least n x and at most m x (ungreedy<span style=color:#f92672>/</span>lazy)
</span></span><span style=display:flex><span>x{n,}<span style=color:#f92672>?</span>    at least n x (ungreedy<span style=color:#f92672>/</span>lazy)
</span></span><span style=display:flex><span>x{n}<span style=color:#f92672>?</span>     exactly n x
</span></span></code></pre></div><h5 id=empty-matches>Empty Matches</h5><hr><p>ç©ºæ­£åˆ™è¡¨è¾¾å¼æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶ä¸”åŒ¹é…ç©ºå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œç©ºæ­£åˆ™è¡¨è¾¾å¼åœ¨ä½ç½®0ã€1ã€2å’Œ3å¤„åŒ¹é…abcã€‚åœ¨ä½¿ç”¨é¡¶çº§<code>Regex</code>å¯¹<code>&amp;str</code> haystacksè¿›è¡ŒåŒ¹é…æ—¶ï¼Œç©ºåŒ¹é…ä¼šåˆ†å‰²ä»£ç ç‚¹ï¼Œå› æ­¤æ°¸è¿œä¸ä¼šè¿”å›ã€‚ç„¶è€Œï¼Œåœ¨ä½¿ç”¨<code>bytes::Regex</code>æ—¶ï¼Œå…è®¸è¿™æ ·çš„åŒ¹é…ã€‚ä¾‹å¦‚ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> regex::Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> ranges: Vec<span style=color:#f92672>&lt;</span>_<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> re.find_iter(<span style=color:#e6db74>&#34;ğŸ’©&#34;</span>).map(<span style=color:#f92672>|</span>m<span style=color:#f92672>|</span> m.range()).collect();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(ranges, <span style=color:#a6e22e>vec!</span>[<span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span><span style=color:#f92672>..</span><span style=color:#ae81ff>4</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> regex::bytes::Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> ranges: Vec<span style=color:#f92672>&lt;</span>_<span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> re.find_iter(<span style=color:#e6db74>&#34;ğŸ’©&#34;</span>.as_bytes()).map(<span style=color:#f92672>|</span>m<span style=color:#f92672>|</span> m.range()).collect();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(ranges, <span style=color:#a6e22e>vec!</span>[<span style=color:#ae81ff>0</span><span style=color:#f92672>..</span><span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>..</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span><span style=color:#f92672>..</span><span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span><span style=color:#f92672>..</span><span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span><span style=color:#f92672>..</span><span style=color:#ae81ff>4</span>]);
</span></span></code></pre></div><p>æ³¨æ„ï¼Œç©ºæ­£åˆ™è¡¨è¾¾å¼ä¸æ°¸è¿œæ— æ³•åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼ [a&&amp;b] æ˜¯ä¸€ä¸ªå­—ç¬¦ç±»ï¼Œè¡¨ç¤º a å’Œ b çš„äº¤é›†ã€‚è¿™ä¸ªäº¤é›†æ˜¯ç©ºçš„ï¼Œè¿™æ„å‘³ç€å­—ç¬¦ç±»æ˜¯ç©ºçš„ã€‚ç”±äºç©ºé›†ä¸­æ²¡æœ‰ä¸œè¥¿ï¼Œ[a&&amp;b] ä¸åŒ¹é…ä»»ä½•ä¸œè¥¿ï¼Œç”šè‡³ä¸åŒ¹é…ç©ºå­—ç¬¦ä¸²ã€‚</p><h5 id=grouping-and-flags>Grouping and flags</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>(exp)          <span style=color:#960050;background-color:#1e0010>ç¼–å·æ•è·ç»„ï¼ˆæŒ‰æ‰“å¼€æ‹¬å·ç´¢å¼•ï¼‰</span>
</span></span><span style=display:flex><span>(<span style=color:#f92672>?</span>P<span style=color:#f92672>&lt;</span>name<span style=color:#f92672>&gt;</span>exp)  <span style=color:#960050;background-color:#1e0010>å‘½åï¼ˆä¹Ÿå¯ç¼–å·ï¼‰æ•è·ç»„ï¼ˆåç§°å¿…é¡»ä¸ºå­—æ¯æ•°å­—ï¼‰</span>
</span></span><span style=display:flex><span>(<span style=color:#f92672>?&lt;</span>name<span style=color:#f92672>&gt;</span>exp)   <span style=color:#960050;background-color:#1e0010>å‘½åï¼ˆä¹Ÿå¯ç¼–å·ï¼‰æ•è·ç»„ï¼ˆåç§°å¿…é¡»ä¸ºå­—æ¯æ•°å­—ï¼‰</span>
</span></span><span style=display:flex><span>(<span style=color:#f92672>?</span>:<span style=color:#a6e22e>exp</span>)        <span style=color:#960050;background-color:#1e0010>éæ•è·ç»„</span>
</span></span><span style=display:flex><span>(<span style=color:#f92672>?</span>flags)       <span style=color:#960050;background-color:#1e0010>åœ¨å½“å‰ç»„å†…è®¾ç½®æ ‡å¿—</span>
</span></span><span style=display:flex><span>(<span style=color:#f92672>?</span>flags:<span style=color:#a6e22e>exp</span>)   <span style=color:#960050;background-color:#1e0010>è®¾ç½®</span>expçš„æ ‡å¿—<span style=color:#960050;background-color:#1e0010>ï¼ˆéæ•è·ï¼‰</span>
</span></span></code></pre></div><p>æ•è·ç»„åç§°å¿…é¡»æ˜¯ä»»ä½•ç”±å­—æ¯ã€æ•°å­—å’Œ Unicode ä»£ç ç‚¹ç»„æˆçš„åºåˆ—ï¼Œæ­¤å¤–è¿˜å¯ä»¥åŒ…å« <code>.</code>ã€<code>_</code>ã€<code>[</code> å’Œ<code> ]</code>ã€‚åç§°å¿…é¡»ä»¥ <code>_</code> æˆ–å­—æ¯ä»£ç ç‚¹å¼€å¤´ã€‚å­—æ¯ç ç‚¹å¯¹åº”äºå­—æ¯Unicodeå±æ€§ï¼Œè€Œæ•°å­—ç ç‚¹å¯¹åº”äºåè¿›åˆ¶æ•°å­—ã€å­—æ¯æ•°å­—å’Œå…¶ä»–æ•°å­—é€šç”¨ç±»åˆ«çš„å¹¶é›†ã€‚</p><p>æ ‡å¿—æ˜¯å•ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ<code>(?x)</code> è®¾ç½®æ ‡å¿— <code>x</code>ï¼Œ<code>(?-x)</code> æ¸…é™¤æ ‡å¿— <code>x</code>ã€‚å¯ä»¥åŒæ—¶è®¾ç½®æˆ–æ¸…é™¤å¤šä¸ªæ ‡å¿—ï¼š<code>(?xy)</code> åŒæ—¶è®¾ç½®æ ‡å¿— <code>x</code> å’Œ <code>y</code>ï¼Œ<code>(?x-y)</code> è®¾ç½®æ ‡å¿— <code>x</code> å¹¶æ¸…é™¤æ ‡å¿— <code>y</code>ã€‚</p><p>æ‰€æœ‰æ ‡å¿—é»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦ç”¨çš„ï¼Œé™¤éå¦æœ‰è¯´æ˜ã€‚å®ƒä»¬æ˜¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>i     <span style=color:#960050;background-color:#1e0010>ä¸åŒºåˆ†å¤§å°å†™ï¼šå­—æ¯åŒ¹é…å¤§å°å†™</span>
</span></span><span style=display:flex><span>m     <span style=color:#960050;background-color:#1e0010>å¤šè¡Œæ¨¡å¼ï¼š</span><span style=color:#f92672>^</span> <span style=color:#960050;background-color:#1e0010>å’Œ</span> <span style=color:#75715e>$</span> <span style=color:#960050;background-color:#1e0010>åŒ¹é…è¡Œçš„å¼€å§‹</span><span style=color:#f92672>/</span><span style=color:#960050;background-color:#1e0010>ç»“æŸ</span>
</span></span><span style=display:flex><span>s     <span style=color:#960050;background-color:#1e0010>å…è®¸</span> . <span style=color:#960050;background-color:#1e0010>åŒ¹é…</span> <span style=color:#960050;background-color:#1e0010>\</span>n
</span></span><span style=display:flex><span>R     <span style=color:#960050;background-color:#1e0010>å¯ç”¨</span>CRLFæ¨¡å¼<span style=color:#960050;background-color:#1e0010>ï¼šå½“å¯ç”¨å¤šè¡Œæ¨¡å¼æ—¶ï¼Œä½¿ç”¨\</span>r<span style=color:#960050;background-color:#1e0010>\</span>n
</span></span><span style=display:flex><span>U     <span style=color:#960050;background-color:#1e0010>äº¤æ¢</span> x<span style=color:#f92672>*</span> <span style=color:#960050;background-color:#1e0010>å’Œ</span> x<span style=color:#f92672>*?</span> <span style=color:#960050;background-color:#1e0010>çš„å«ä¹‰</span>
</span></span><span style=display:flex><span>u     Unicode <span style=color:#960050;background-color:#1e0010>æ”¯æŒï¼ˆé»˜è®¤å¯ç”¨ï¼‰</span>
</span></span><span style=display:flex><span>x     <span style=color:#960050;background-color:#1e0010>è¯¦ç»†æ¨¡å¼ï¼Œå¿½ç•¥ç©ºç™½å­—ç¬¦å¹¶å…è®¸è¡Œæ³¨é‡Šï¼ˆä»¥</span> <span style=color:#960050;background-color:#1e0010>`</span>#<span style=color:#960050;background-color:#1e0010>`</span> <span style=color:#960050;background-color:#1e0010>å¼€å§‹ï¼‰</span>
</span></span></code></pre></div><p>åœ¨è¯¦ç»†æ¨¡å¼ä¸‹ï¼Œç©ºç™½å­—ç¬¦åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¼šè¢«å¿½ç•¥ï¼ŒåŒ…æ‹¬åœ¨å­—ç¬¦ç±»ä¸­ã€‚è¦æ’å…¥ç©ºç™½å­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨å…¶è½¬ä¹‰å½¢å¼æˆ–åå…­è¿›åˆ¶å­—é¢é‡ã€‚ä¾‹å¦‚ï¼Œ<code>\ </code>æˆ– <code>\x20</code> ç”¨äºè¡¨ç¤º ASCII ç©ºæ ¼ã€‚</p><p>åœ¨æ¨¡å¼ä¸­å¯ä»¥åˆ‡æ¢æ ‡å¿—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå‰åŠéƒ¨åˆ†ä¸åŒºåˆ†å¤§å°å†™ï¼ŒååŠéƒ¨åˆ†åŒºåˆ†å¤§å°å†™ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>&#34;r(?i)a+(?-i)b+&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> m <span style=color:#f92672>=</span> re.find(<span style=color:#e6db74>&#34;AaAaAabbBBBb&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(m.as_str(), <span style=color:#e6db74>&#34;AaAaAabb&#34;</span>);
</span></span></code></pre></div><p>æ³¨æ„ï¼Œ<code>a+</code> åŒ¹é…<code>a</code> æˆ–<code>A</code>ï¼Œä½† <code>b+</code> åªåŒ¹é… <code>b</code>ã€‚</p><p>å¤šè¡Œæ¨¡å¼æ„å‘³ç€ ^ å’Œ $ ä¸å†ä»…åŒ¹é…è¾“å…¥çš„å¼€å§‹/ç»“æŸä½ç½®ï¼Œè¿˜åŒ¹é…è¡Œçš„å¼€å§‹/ç»“æŸä½ç½®ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?m)^line \d+&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> m <span style=color:#f92672>=</span> re.find(<span style=color:#e6db74>&#34;line one</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>line 2</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(m.as_str(), <span style=color:#e6db74>&#34;line 2&#34;</span>);
</span></span></code></pre></div><p>æ³¨æ„ ^ åŒ¹é…åœ¨æ–°è¡Œä¹‹åï¼Œå³ä½¿åœ¨è¾“å…¥çš„æœ«å°¾ä¹Ÿæ˜¯å¦‚æ­¤ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?m)^&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> m <span style=color:#f92672>=</span> re.find_iter(<span style=color:#e6db74>&#34;test</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>).last().unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>((m.start(), m.end()), (<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>));
</span></span></code></pre></div><p>å½“åŒæ—¶å¯ç”¨CRLFæ¨¡å¼å’Œå¤šè¡Œæ¨¡å¼æ—¶ï¼Œ<code>^</code>å’Œ<code>$</code>å°†åŒ¹é…<code>\r</code>æˆ–<code>\n</code>ï¼Œä½†æ°¸è¿œä¸ä¼šåœ¨<code>\r\n</code>ä¸­é—´ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?mR)^foo$&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> m <span style=color:#f92672>=</span> re.find(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>foo</span><span style=color:#ae81ff>\r\n</span><span style=color:#e6db74>&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(m.as_str(), <span style=color:#e6db74>&#34;foo&#34;</span>);
</span></span></code></pre></div><p>Unicodeæ¨¡å¼ä¹Ÿå¯ä»¥é€‰æ‹©æ€§åœ°ç¦ç”¨ï¼Œå°½ç®¡åªæœ‰åœ¨ç»“æœä¸ä¼šåŒ¹é…æ— æ•ˆçš„UTF-8æ—¶æ‰è¿™æ ·åšã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ä½¿ç”¨ASCIIå•è¯è¾¹ç•Œè€Œä¸æ˜¯Unicodeå•è¯è¾¹ç•Œï¼Œè¿™å¯èƒ½ä¼šä½¿æŸäº›æ­£åˆ™è¡¨è¾¾å¼æœç´¢è¿è¡Œå¾—æ›´å¿«ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> regex::Regex;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> re <span style=color:#f92672>=</span> Regex::new(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;(?-u:\b).+(?-u:\b)&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> m <span style=color:#f92672>=</span> re.find(<span style=color:#e6db74>&#34;$$abc$$&#34;</span>).unwrap();
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert_eq!</span>(m.as_str(), <span style=color:#e6db74>&#34;abc&#34;</span>);
</span></span></code></pre></div><h5 id=escape-sequences>Escape sequences</h5><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>*</span>              literal <span style=color:#f92672>*</span>, applies to all <span style=color:#66d9ef>ASCII</span> except [<span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span>A<span style=color:#f92672>-</span>Za<span style=color:#f92672>-</span>z<span style=color:#f92672>&lt;&gt;</span>]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>a              bell (<span style=color:#960050;background-color:#1e0010>\</span>x07)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>f              form feed (<span style=color:#960050;background-color:#1e0010>\</span>x0C)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>t              horizontal tab
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>n              new line
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>r              carriage <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>v              vertical tab (<span style=color:#960050;background-color:#1e0010>\</span>x0B)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>A              matches at the beginning of a haystack
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>z              matches at the end of a haystack
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>b              word boundary assertion
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>B              negated word boundary assertion
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>b{start}, <span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>&lt;</span>   start<span style=color:#f92672>-</span>of<span style=color:#f92672>-</span>word boundary assertion
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>b{end}, <span style=color:#960050;background-color:#1e0010>\</span><span style=color:#f92672>&gt;</span>     end<span style=color:#f92672>-</span>of<span style=color:#f92672>-</span>word boundary assertion
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>b{start<span style=color:#f92672>-</span>half}  half of a start<span style=color:#f92672>-</span>of<span style=color:#f92672>-</span>word boundary assertion
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>b{end<span style=color:#f92672>-</span>half}    half of a end<span style=color:#f92672>-</span>of<span style=color:#f92672>-</span>word boundary assertion
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#ae81ff>123</span>            octal character code, up to three digits (when enabled)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>x7F            hex character code (exactly two digits)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>x{<span style=color:#ae81ff>10</span>FFFF}      any hex character code corresponding to a Unicode code point
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>u007F          hex character code (exactly four digits)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>u{<span style=color:#ae81ff>7</span>F}          any hex character code corresponding to a Unicode code point
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#66d9ef>U0000007F</span>      hex character code (exactly eight digits)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>U{<span style=color:#ae81ff>7</span>F}          any hex character code corresponding to a Unicode code point
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>p{Letter}      Unicode character class
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>P{Letter}      negated Unicode character class
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>d, <span style=color:#960050;background-color:#1e0010>\</span>s, <span style=color:#960050;background-color:#1e0010>\</span>w      Perl character class
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>D, <span style=color:#960050;background-color:#1e0010>\</span>S, <span style=color:#960050;background-color:#1e0010>\</span>W      negated Perl character class
</span></span></code></pre></div><h5 id=perl-character-classes-unicode-friendly>Perl character classes (Unicode friendly)</h5><hr><p>è¿™äº›ç±»åŸºäºUTS#18ä¸­æä¾›çš„å®šä¹‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>d     digit (<span style=color:#960050;background-color:#1e0010>\</span>p{Nd})
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>D     not digit
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>s     whitespace (<span style=color:#960050;background-color:#1e0010>\</span>p{White_Space})
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>S     not whitespace
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>w     word character (<span style=color:#960050;background-color:#1e0010>\</span>p{Alphabetic} <span style=color:#f92672>+</span> <span style=color:#960050;background-color:#1e0010>\</span>p{M} <span style=color:#f92672>+</span> <span style=color:#960050;background-color:#1e0010>\</span>d <span style=color:#f92672>+</span> <span style=color:#960050;background-color:#1e0010>\</span>p{Pc} <span style=color:#f92672>+</span> <span style=color:#960050;background-color:#1e0010>\</span>p{Join_Control})
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>\</span>W     not word character
</span></span></code></pre></div><h5 id=ascii-character-classes>ASCII character classes</h5><hr><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>[[:<span style=color:#a6e22e>alnum</span>:]]    alphanumeric ([<span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span>A<span style=color:#f92672>-</span>Za<span style=color:#f92672>-</span>z])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>alpha</span>:]]    alphabetic ([A<span style=color:#f92672>-</span>Za<span style=color:#f92672>-</span>z])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>ascii</span>:]]    <span style=color:#66d9ef>ASCII</span> ([<span style=color:#960050;background-color:#1e0010>\</span>x00<span style=color:#f92672>-</span><span style=color:#960050;background-color:#1e0010>\</span>x7F])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>blank</span>:]]    blank ([<span style=color:#960050;background-color:#1e0010>\</span>t ])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>cntrl</span>:]]    control ([<span style=color:#960050;background-color:#1e0010>\</span>x00<span style=color:#f92672>-</span><span style=color:#960050;background-color:#1e0010>\</span>x1F<span style=color:#960050;background-color:#1e0010>\</span>x7F])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>digit</span>:]]    digits ([<span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span>])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>graph</span>:]]    graphical ([<span style=color:#f92672>!-~</span>])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>lower</span>:]]    lower case ([a<span style=color:#f92672>-</span>z])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>print</span>:]]    printable ([ <span style=color:#f92672>-~</span>])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>punct</span>:]]    punctuation ([<span style=color:#f92672>!-/</span>:<span style=color:#f92672>-@</span><span style=color:#960050;background-color:#1e0010>\</span>[<span style=color:#f92672>-</span><span style=color:#960050;background-color:#1e0010>`</span>{<span style=color:#f92672>-~</span>])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>space</span>:]]    whitespace ([<span style=color:#960050;background-color:#1e0010>\</span>t<span style=color:#960050;background-color:#1e0010>\</span>n<span style=color:#960050;background-color:#1e0010>\</span>v<span style=color:#960050;background-color:#1e0010>\</span>f<span style=color:#960050;background-color:#1e0010>\</span>r ])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>upper</span>:]]    upper case ([A<span style=color:#f92672>-</span>Z])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>word</span>:]]     word characters ([<span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span>A<span style=color:#f92672>-</span>Za<span style=color:#f92672>-</span>z_])
</span></span><span style=display:flex><span>[[:<span style=color:#a6e22e>xdigit</span>:]]   hex digit ([<span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9</span>A<span style=color:#f92672>-</span>Fa<span style=color:#f92672>-</span>f])
</span></span></code></pre></div><p>[åŸåœ°å€][https://docs.rs/regex/latest/regex/ ]</p><hr><h4 id=å•è¯>å•è¯</h4><ul><li><code>verbose</code>:<ul><li><code>adj.</code> å†—é•¿çš„ï¼Œå•°å—¦çš„</li></ul></li><li><code>routine</code>:<ul><li><code>n.</code> å¸¸è§„ï¼Œ æ— èŠ</li><li><code>adj.</code> å¸¸è§„çš„ï¼Œæ— èŠçš„</li></ul></li><li><code>subsequent</code>ï¼š<ul><li><code>adj.</code>éšåçš„ï¼Œåæ¥çš„</li></ul></li><li><code>wildcard</code>:<ul><li><code>n.</code>é€šé…ç¬¦</li></ul></li><li><code>tweak</code><ul><li><code>adj.</code>ç¨å¾®è°ƒæ•´ï¼Œæ‹§ï¼Œæ‰¯</li></ul></li><li><code>polymorphic</code><ul><li><code>adj.</code>å¤šæ€çš„</li></ul></li><li><code>insignificant</code><ul><li><code>adj.</code>å¾®ä¸è¶³é“çš„ï¼›æ— è¶³è½»é‡çš„ï¼›æ— æ„ä¹‰çš„</li></ul></li><li><code>comprehend</code><ul><li><code>vt.</code>ç†è§£ï¼Œé¢†æ‚Ÿï¼ŒåŒ…å«</li></ul></li><li><code>simultaneously</code><ul><li><code>adv.</code>åŒæ—¶åœ°ï¼ŒåŒæ­¥åœ°</li></ul></li><li><code>overlap</code><ul><li><code>vt.</code>ä¸&mldr;é‡å ï¼›æœ‰é‡å </li><li><code>n.</code>é‡å éƒ¨åˆ†</li></ul></li><li><code>concern</code><ul><li><code>n.</code>å…³å¿ƒï¼Œæ‹…å¿ƒ</li><li><code>vt.</code>ä½¿æ‹…å¿ƒï¼Œæ¶‰åŠ</li></ul></li><li><h2 id=contention><code>contention</code></h2></li></ul></section><footer class=article-footer></footer></article><footer class=site-footer><section class=copyright>&copy;
2025 zedçš„åšå®¢</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>