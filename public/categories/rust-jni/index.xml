<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Rust-Jni on zed的博客</title><link>https://www.dust-zed.site/categories/rust-jni/</link><description>Recent content in Rust-Jni on zed的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 15 Oct 2025 13:45:38 +0800</lastBuildDate><atom:link href="https://www.dust-zed.site/categories/rust-jni/index.xml" rel="self" type="application/rss+xml"/><item><title>Rust Jni配置</title><link>https://www.dust-zed.site/android-develop/rust-jni%E9%85%8D%E7%BD%AE/</link><pubDate>Wed, 15 Oct 2025 13:45:38 +0800</pubDate><guid>https://www.dust-zed.site/android-develop/rust-jni%E9%85%8D%E7%BD%AE/</guid><description>&lt;h4 id="环境配置">环境配置
&lt;/h4>&lt;h5 id="1-环境检查">1. 环境检查
&lt;/h5>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 检查 Rust 是否安装&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rustc --version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 应该看到: rustc 1.xx.x&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 检查 Cargo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cargo --version
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 检查 Android Studio 和 SDK&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 确保已安装 Android Studio&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="2-安装必要工具">2. 安装必要工具
&lt;/h5>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 1. 安装 Android targets&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rustup target add aarch64-linux-android &lt;span style="color:#75715e"># ARM64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rustup target add armv7-linux-androideabi &lt;span style="color:#75715e"># ARM32&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rustup target add i686-linux-android &lt;span style="color:#75715e"># x86&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rustup target add x86_64-linux-android &lt;span style="color:#75715e"># x86_64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 2. 安装 cargo-ndk (重要!)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cargo install cargo-ndk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 3. 验证安装&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cargo ndk --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="配置ndk路径">配置NDK路径
&lt;/h5>&lt;p>&lt;strong>macOS/Linux&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 编辑 ~/.bashrc 或 ~/.zshrc&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export ANDROID_HOME&lt;span style="color:#f92672">=&lt;/span>$HOME/Library/Android/sdk &lt;span style="color:#75715e"># macOS&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 或&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export ANDROID_HOME&lt;span style="color:#f92672">=&lt;/span>$HOME/Android/Sdk &lt;span style="color:#75715e"># Linux&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export ANDROID_NDK_HOME&lt;span style="color:#f92672">=&lt;/span>$ANDROID_HOME/ndk/25.2.9519653
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 注意: 版本号可能不同,检查你的 ndk 目录&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 应用配置&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>source ~/.bashrc &lt;span style="color:#75715e"># 或 source ~/.zshrc&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Windows&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 设置环境变量&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setx ANDROID_HOME &lt;span style="color:#e6db74">&amp;#34;C:\Users\YourName\AppData\Local\Android\Sdk&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>setx ANDROID_NDK_HOME &lt;span style="color:#e6db74">&amp;#34;%ANDROID_HOME%\ndk\25.2.9519653&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="验证ndk">验证NDK:
&lt;/h5>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>echo $ANDROID_NDK_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 应该显示路径,如: /Users/xxx/Library/Android/sdk/ndk/25.2.9519653&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ls $ANDROID_NDK_HOME
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># 应该看到: build, platforms, sources 等目录&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>