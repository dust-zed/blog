{{ define "main" }}
  <!-- 添加环境信息调试标记（正式环境构建后删除） -->
  <div style="display:none">
    Pages Count: {{ len .Pages }} | 
    Section: {{ .Section }} | 
    Kind: {{ .Kind }}
  </div>

  <!-- 核心内容区域 -->
  <div class="content">
    <div class="android-card-container mw9 center pa3">
      {{ if .Pages }}
        <div class="flex flex-wrap">
          {{ range .Pages }}
            <div class="w-100 w-50-m w-33-l pa2">
              <div class="custom-card ba b--light-gray br2 bg-white shadow-hover">
                <div class="pa3">
                  <h3 class="f4 mv0">
                    <!-- 使用绝对URL解决路径问题 -->
                    <a href="{{ .RelPermalink | absURL }}" class="link primary-color dim">
                      {{ .Title }}
                    </a>
                  </h3>
                  
                  <div class="f6 gray mv2">
                    <!-- 使用安全日期格式 -->
                    {{ if .Date }}
                      发布于: {{ .Date.Format "2006-01-02" }} | 
                    {{ end }}
                    阅读: {{ .ReadingTime }}分钟
                  </div>
                  
                  <p class="f6 lh-copy measure">
                    <!-- 摘要安全处理 -->
                    {{ if .Summary }}
                      {{ .Summary | truncate 100 }}
                    {{ else }}
                      {{ .Content | plainify | truncate 100 }}
                    {{ end }}
                  </p>
                  
                  {{ with .Params.categories }}
                    <div class="mt2">
                      {{ range . }}
                        <span class="dib pa1 mr1 bg-light-gray f7">{{ . }}</span>
                      {{ end }}
                    </div>
                  {{ end }}
                </div>
              </div>
            </div>
          {{ end }}
        </div>
      {{ else }}
        <!-- 空状态处理 -->
        <div class="tc pa5">
          <svg class="w4 h4 mb3 gray" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
          </svg>
          <p class="f4 gray">该分类下暂无文章</p>
          <a href="/" class="link blue dim">返回首页</a>
        </div>
      {{ end }}
    </div>
  </div>

  <!-- 内联样式（解决CDN加载问题） -->
  <style>
    .custom-card {
      transition: all 0.3s;
      height: 100%;
      position: relative;
      overflow: hidden;
    }
    .custom-card:before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: #1e6bb8;
      transform: scaleX(0);
      transition: transform 0.3s;
    }
    .custom-card:hover {
      box-shadow: 0 10px 20px rgba(0,0,0,0.08);
      transform: translateY(-3px);
    }
    .custom-card:hover:before {
      transform: scaleX(1);
    }
    .primary-color {
      color: #1e6bb8;
    }
    .android-card-container {
      min-height: 300px;
    }
    @media (max-width: 767px) {
      .w-100-m {
        width: 100% !important;
      }
    }
  </style>
{{ end }}
